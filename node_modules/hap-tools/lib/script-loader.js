"use strict";var _utils=require("./utils"),_parser=require("./parser"),_shared=require("./shared");module.exports=function(e,r){var a=this;this.cacheable&&this.cacheable();var t=this.async();(0,_parser.parseScript)(e).then(function(e){var p=e.parsed,c=(0,_shared.updateSourceScript)(p);p=c.fileCont,(0,_utils.logWarn)(a,c.logFeatureList);var i=p.match(/require\s*\(['"]@([^()]+?)['"]\)/g);i&&i.length>0&&i.forEach(function(e){p=p.replace(e,e.replace("require","$app_require$").replace("@","@app-module/"))});var u=p.match(/import\s+([^()]+?)\s+from\s+['"]@([^()]+?)['"]/g);u&&u.length>0&&u.forEach(function(e){p=p.replace(e,e.replace("import","var").replace("from","= $app_require$(").replace("@","@app-module/")+");")}),t(null,"module.exports = function(module, exports, $app_require$){"+p+"}",r)}).catch(function(e){t(e,"")})};