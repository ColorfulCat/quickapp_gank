"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,o=Array(e.length);r<e.length;r++)o[r]=e[r];return o}return Array.from(e)}function mkdirsSync(e){return!!_fs2.default.existsSync(e)||(mkdirsSync(_path2.default.dirname(e))?(_fs2.default.mkdirSync(e),!0):void 0)}function prependLevel(e,r){!logLevelMap[e]&&function(r){var o=r.toUpperCase().substr(0,4);o.paddEnd&&o.paddEnd(4),logLevelMap[e]=o}(e),"string"==typeof r[0]&&r[0].length>1&&"["!==r[0][0]&&(r[0]="["+logLevelMap[e]+"] "+r[0])}function getIPv4IPAddress(){var e=_os2.default.networkInterfaces(),r=void 0;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var t=e[o];if(t.every(function(e,o,t){return!("IPv4"===e.family&&!e.internal&&"127.0.0.1"!==e.address)||(r=e,!1)}),void 0!==r)break}return _assert2.default.notEqual(r,void 0,"Getting IP address failed!"),r.address}function getClientIPAddress(e){return stripPrefixForIPV4MappedIPV6Address(e.headers["x-forwarded-for"]||e.connection&&e.connection.remoteAddress||e.socket&&e.socket.remoteAddress||e.connection&&e.connection.socket&&e.connection.socket.remoteAddress)}function stripPrefixForIPV4MappedIPV6Address(e){return/^::1$/.test(e)&&(e="127.0.0.1"),/^::.{0,4}:(\d{1,3}\.){3}\d{1,3}/.test(e)&&(e=e.replace(/^.*:/,"")),e}function outputQRCodeOnTerminal(e){console.info(""),console.info("生成HTTP服务器的二维码: "+e),_qrcodeTerminal2.default.generate(e,{small:!0})}function traverseDirSync(e,r,o){_fs2.default.readdirSync(e).forEach(function(t){t=_path2.default.join(e,t);var n=_fs2.default.statSync(t);n&&n.isDirectory()?traverseDirSync(t,r,o):("function"==typeof o&&!o(t)||"function"!=typeof o)&&r.push(t)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.colorconsole=void 0,exports.mkdirsSync=mkdirsSync,exports.getIPv4IPAddress=getIPv4IPAddress,exports.getClientIPAddress=getClientIPAddress,exports.stripPrefixForIPV4MappedIPV6Address=stripPrefixForIPV4MappedIPV6Address,exports.outputQRCodeOnTerminal=outputQRCodeOnTerminal,exports.traverseDirSync=traverseDirSync;var _assert=require("assert"),_assert2=_interopRequireDefault(_assert),_path=require("path"),_path2=_interopRequireDefault(_path),_fs=require("fs"),_fs2=_interopRequireDefault(_fs),_os=require("os"),_os2=_interopRequireDefault(_os),_chalk=require("chalk"),_chalk2=_interopRequireDefault(_chalk),_qrcodeTerminal=require("qrcode-terminal"),_qrcodeTerminal2=_interopRequireDefault(_qrcodeTerminal),logLevelMap={},colorconsole=exports.colorconsole={trace:function(){for(var e,r=arguments.length,o=Array(r),t=0;t<r;t++)o[t]=arguments[t];prependLevel("trace",o),(e=console).trace.apply(e,_toConsumableArray(o))},log:function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];prependLevel("log",r),console.log(_chalk2.default.green.apply(_chalk2.default,_toConsumableArray(r)))},info:function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];prependLevel("info",r),console.info(_chalk2.default.green.apply(_chalk2.default,_toConsumableArray(r)))},warn:function(){for(var e,r=arguments.length,o=Array(r),t=0;t<r;t++)o[t]=arguments[t];prependLevel("warn",o),console.warn((e=_chalk2.default.yellow).bold.apply(e,_toConsumableArray(o)))},error:function(){for(var e,r=arguments.length,o=Array(r),t=0;t<r;t++)o[t]=arguments[t];prependLevel("error",o),console.error((e=_chalk2.default.red).bold.apply(e,_toConsumableArray(o)))},throw:function(){var e;throw new Error((e=_chalk2.default.red).bold.apply(e,arguments))}};