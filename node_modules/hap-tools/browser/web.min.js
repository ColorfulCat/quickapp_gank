(this.nativeLog||function(e){console.log(e)})("### App Framework ### Start: 0.0.6 Build 20180319");var global=this,process={env:{}},setTimeout=global.setTimeout;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=Yi(t),this.reject=Yi(r)}function r(){Gl.forEach(function(e){var t=Gl.indexOf(e);Hl[e]={},Gl.forEach(function(r){Gl.indexOf(r)<=t&&(Hl[e][r]=!0)})})}function n(e){var t=global.Env&&global.Env.logLevel||"log";return Hl[t]&&Hl[t][e]}function o(){r();var e=function(e){return!global.Env||!1!==global.Env.logHash.na||"string"!=typeof e||0!==e.indexOf("### App Framework ###")},t=global.Env&&"trace"===global.Env.logLevel&&console.trace,o=console.debug,a=console.log,i=console.info,l=console.warn,s=console.error,c=console;console._ori={trace:t,debug:o,log:a,info:i,warn:l,error:s},c.trace=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("trace")&&console._ori.trace.apply(console,t)},c.debug=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("debug")&&console._ori.debug.apply(console,t)},c.log=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("log")&&console._ori.log.apply(console,t)},c.info=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("info")&&console._ori.info.apply(console,t)},c.warn=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("warn")&&console._ori.warn.apply(console,t)},c.error=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];e(t[0])&&n("error")&&console._ori.error.apply(console,t)};var u={};["debug","log","info","warn","error"].forEach(function(e){u[e]=function(){}}),c.curry=function(e){var t=global.Env.logHash;return t[e]&&t[e].off?u:console}}function a(){Hl={},global.console=Ul}function i(){}function l(){global.history=Kl}function s(){var e={},t=0;"function"==typeof rs&&(global.setTimeoutWrap=function(r,n,o){return e[++t]=n,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### setTimeoutWrap "+t+"----"),rs(r,t,o),t},global.setTimeout=function(e,t){return global.setTimeoutWrap(-1,e,t)},global.setTimeoutCallback=function(t){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### setTimeout 执行回调 "+t+"----"),"function"==typeof e[t]&&(e[t](),delete e[t])},global.clearTimeout=global.clearTimeoutWrap=function(t){"function"==typeof ts&&ts(t),"function"==typeof e[t]?delete e[t]:e[t]=void 0}),"function"==typeof os&&(global.setIntervalWrap=function(r,n,o){return e[++t]=n,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### setIntervalWrap "+t+"----"),os(r,t,o),t},global.setInterval=function(e,t){return global.setIntervalWrap(-1,e,t)},global.setIntervalCallback=function(t){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### setInterval 执行回调 "+t+"----"),"function"==typeof e[t]&&e[t]()},global.clearInterval=global.clearIntervalWrap=function(t){"function"==typeof ns&&ns(t),"function"==typeof e[t]?delete e[t]:e[t]=void 0}),"function"==typeof is&&(global.requestAnimationFrameWrap=function(r,n){return e[++t]=n,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### requestAnimationFrame "+t+"----"),is(t),t},global.requestAnimationFrame=function(e){return global.requestAnimationFrameWrap(-1,e)},global.requestAnimationFrameCallback=function(r){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### requestAnimationFrame 执行回调 "+t+"----"),"function"==typeof e[r]&&e[r]()},global.cancelAnimationFrame=global.cancelAnimationFrameWrap=function(t){"function"==typeof as&&as(t),"function"==typeof e[t]?delete e[t]:e[t]=void 0})}function c(){global.setTimeout=Yl,global.clearTimeout=ts,global.clearTimeoutWrap=null,global.setTimeoutCallback=null,global.setTimeoutWrap=null,global.setInterval=Ql,global.clearInterval=ns,global.clearIntervalWrap=null,global.setIntervalCallback=null,global.setIntervalWrap=null,global.requestAnimationFrame=es,global.cancelAnimationFrame=as,global.cancelAnimationFrameWrap=null,global.requestAnimationFrameCallback=null,global.requestAnimationFrameWrap=null}function u(){Object.freeze(Object),Object.freeze(Array),Object.freeze(Object.prototype),Object.freeze(Array.prototype),Object.freeze(String.prototype),Object.freeze(Number.prototype),Object.freeze(Boolean.prototype),Object.freeze(Error.prototype),Object.freeze(Date.prototype),Object.freeze(RegExp.prototype)}function p(e,t){e&&(ss[e]=t)}function f(e){return ss[e]}function d(e){delete ss[e]}function h(e){var t=ss[e];return t&&t.listener?t.listener:null}function v(e,t){f(e).nodeMap[t.ref]=t}function g(e,t){e.parentNode=t,t.docId&&(e.docId=t.docId,e.owner=t.owner,e.owner.nodeMap[e.ref]=e,e.depth=t.depth+1),e.children.forEach(function(t){g(t,e)})}function m(e,t){var r=t||global.callNative;return"function"!=typeof r&&console.error("### App Runtime ### 没有缺省Handler函数"),function(t){return Array.isArray(t)||(t=[t]),r(e,JSON.stringify(t),"-1")}}function y(e,t,r,n){r<0&&(r=0);var o=t[r-1],a=t[r];return t.splice(r,0,e),n&&(o&&(o.nextSibling=e),e.previousSibling=o,e.nextSibling=a,a&&(a.previousSibling=e)),r}function b(e,t,r){var n=t.indexOf(e);if(!(n<0)){if(r){var o=t[n-1],a=t[n+1];o&&(o.nextSibling=a),a&&(a.previousSibling=o)}t.splice(n,1)}}function E(e,t,r,n){var o=t.indexOf(e);if(o<0||o===r)return-1;b(e,t,n);var a=r;return o<=r&&(a=r-1),y(e,t,a,n),r}function w(){return(cs++).toString()}function _(e){return Object.assign({},ds,{score:{sum:fs.TAG}},e)}function F(e){return Object.assign({},ds,{score:{sum:fs.ID}},e)}function A(e){return Object.assign({},ds,{score:{sum:fs.CLASS}},e)}function k(e){return Object.assign({},ds,e)}function S(e){e=e||[];for(var t=0;t<e.length;t++)!function(t){var r=e[t];hs.forEach(function(e){r.hasOwnProperty(e.newN)&&(r[e.oldN]=r[e.newN],delete r[e.newN],e.newV&&e.newV.indexOf(r[e.oldN])>-1&&(r[e.oldN]=e.oldV[e.newV.indexOf(r[e.oldN])]))})}(t);return e}function O(e){for(var t={id:0,class:0,tag:0,sum:0,depth:1},r=0;r<e.length;r++){var n=e[r];"tag"===n.type?t.tag+=1:"attribute"===n.type&&"id"===n.name?t.id+=1:"attribute"===n.type&&"class"===n.name?t.class+=1:"descendant"!==n.type&&"child"!==n.type||(t.depth+=1)}return t.sum=t.id*fs.ID+t.class*fs.CLASS+t.tag*fs.TAG,{sum:t.sum,depth:t.depth}}function L(e,t,r,n,o,a){var i,l=[];r&&l.push(r),o&&l.push(o),i=Object.keys(n);for(var s=0;s<i.length;s++)l.push(n[i[s]]);i=Object.keys(a);for(var c=0;c<i.length;c++)l.push(a[i[c]]);l.sort(function(e,t){return e.score.sum*fs.GAP+e.order-(t.score.sum*fs.GAP+t.order)});var u=l.map(function(e){return e.style});global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Specificity 执行 buildStyle()---- ",l.map(function(e){return'"'+e.name+'"'}).join(" < "));for(var p=Object.assign.apply(Object,[{}].concat(u,[t])),f=C(e,p),d=0;d<f.length;d++){var h=f[d];void 0!==p[h]&&void 0===e[h]?e[h]=!0:void 0===p[h]&&void 0!==e[h]&&(p[h]="")}return p}function C(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r={},n=0;n<e.length;n++)for(var o in e[n])r[o]=!0;return Object.keys(r)}function x(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"==typeof Object.assign)Object.assign.apply(Object,[e].concat(t));else{var n=t.shift();for(var o in n)e[o]=n[o];t.length&&x.apply(void 0,[e].concat(t))}return e}function N(e,t,r,n){Object.defineProperty(e,t,{value:r,enumerable:!!n,writable:!0,configurable:!0})}function I(e,t){if(e.length){var r=e.indexOf(t);if(r>-1)return e.splice(r,1)}}function T(e,t){return ws.call(e,t)}function j(e,t){return function(r){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,r):e.call(t)}}function P(e){return"function"==typeof e}function R(e,t,r){Fs.indexOf(r)>-1||!W(r)?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){return e[t]?e[t][r]:null},set:function(n){e[t]&&(e[t][r]=n)}}):console.error("### App Framework ### 页面数据属性名 '"+r+"' 非法, 属性名不能以$或_开头")}function $(e,t){!W(t)&&e&&delete e[t]}function D(e){return null!==e&&"object"==typeof e}function B(e){return As.call(e)===ks}function W(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function M(){return"object"==typeof nativeSet?nativeSet.create():new Es}function J(e,t){return t?t.toUpperCase():""}function z(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1).toLowerCase()}function V(e){return e.replace(Ns,"").replace(Is,"").replace(Ts,"")}function q(e){return Rs.indexOf(e)>=0}function U(e){return $s.indexOf(e)>=0}function G(){return++Ds}function H(e,t,r,n){if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 调用对象("+e.id+")的回调("+t+") 参数：",JSON.stringify(r)),!e.callbacks)return new Error('invoke: 回调函数 "'+t+'" 没有注册');if(e.vm&&!e.vm.$valid)return void console.error("invoke: 回调函数所属对象("+e.id+")已经无效, 终止回调执行");var o=e.callbacks[t];if("function"==typeof o){var a=o(r);if(void 0!==n&&!1!==n||(e.callbacks[t]=void 0),e.doc){var i=he(e);e.vm&&e.vm._ready&&i&&e.doc.listener.updateFinish()}return a}return new Error('invoke: 无效invoke回调函数Id "'+t+'"')}function Z(e,t,r,n,o,a){if("feature"===a&&!global.JsBridge)return new Error("invokeNative: JsBridge没有初始化");if("module"===a&&!global.ModuleManager)return new Error("invokeNative: ModuleManager没有初始化");var i="feature"===a?global.JsBridge:global.ModuleManager,l=o.length>0?o[0]:{};l&&l.callback&&(l.success&&console.warn("### App Framework ### invoke函数不能同时出现'success'和'callback'参数"),l.success=l.callback);var s={},c={};if(D(l))for(var u in l){var p=l[u];qs.indexOf(u)>=0?"function"==typeof p?c[u]=p:console.warn("### App Framework ### invoke函数的回调参数"+u+"类型不是function"):"callback"!==u&&(s[u]=K(p,e))}else P(l)?c.success=l:s=l;if(n===Vs.MODE.SYNC){var f=i.invoke(t,r,JSON.stringify(s),"-1");if(null==f)return void console.warn("### App Framework ### invoke函数 '"+t+"."+r+"' 返回值为null");global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### invoke函数 '"+t+"."+r+"' 调用成功，返回值为: "+f);var d="string"==typeof f?JSON.parse(f):f;return d?d.content:void 0}var h=[];if(Object.keys(c).length){var v=G();e.callbacks[v]=function(e){var t=c,r=e.code,n=e.content;0===r&&t.success?t.success(n):100===r&&t.cancel?t.cancel():r>=200&&t.fail&&t.fail(n,r),t.complete&&t.complete(n)},zs[v]={instance:e.id.toString(),preserved:2===n},h.push(JSON.stringify(s)),h.push(v.toString())}else h.push(JSON.stringify(s)),h.push("-1");return i.invoke.apply(i,[t,r].concat(h))}function K(e,t){switch(z(e)){case"undefined":case"null":return"";case"regexp":return e.toString();case"date":return e.toISOString();case"number":case"string":case"boolean":case"array":case"object":return e;case"function":var r=G();return t.callbacks?t.callbacks[r]=e:global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### normalize() inst实例已经销毁，不再注册回调"),zs[r]={instance:t.id.toString(),preserved:!1},r.toString();default:return JSON.stringify(e)}}function X(e){var t=zs[e];return t&&!0===t.preserved||(zs[e]=void 0),t}function Y(e){e.$emit("applc:onDestroy"),e.$clear(),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 成功销毁应用("+e.id+")----")}function Q(e,t){void 0===t&&(t=!0);var r=[];Array.isArray(e)?r=e:r.push(e),r.forEach(function(e){var r=e.name;console.log("### App Framework ### 注册模块---- "+r+" <"+e.__type__+">");var n=Us[r];n||(n={type:e.__type__,name:e.name,methods:{},attributes:{},events:{}},Us[r]=n),n.methods||(n.methods={});var o=n.methods;e.methods&&e.methods.length&&e.methods.forEach(function(e){var a=e.name;if(void 0===e.mode&&(e.mode=Vs.MODE.SYNC),void 0===e.type&&(e.type=Vs.TYPE.METHOD),e.type===Vs.TYPE.ATTRIBUTE){var i=e.alias,l=e.access;n.attributes[i]=n.attributes[i]||{},n.attributes[i][l]=e}else if(e.type===Vs.TYPE.EVENT){var s=e.alias;n.events[s]=e}a?o[a]&&!t||(o[a]=e,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 注册模块 "+r+" 接口---- "+a)):console.warn("### App Framework ### 模块 "+r+" 的接口没有name属性")})})}function ee(e,t){var r=e.prototype;for(var n in t)r.hasOwnProperty(n)||(r[n]=t[n])}function te(e,t){function r(e,t){if(e){var r=e;return t.forEach(function(e){e in r||(r[e]={}),r=r[e]}),r}}global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### require模块"+t);var n=[t];if(t.indexOf(".")<0){var o=t+".";for(var a in Us)a.startsWith(o)&&n.push(a)}var i={},l=[];if(n.forEach(function(n){var o=Us[n];if(o){var a=i,s=n.replace(t,"");"."===s.substr(0,1)&&(s=s.substr(1)),s.length>0&&(l=s.split("."),l.length>1&&(l.splice(0,1),a=r(i,l)));var c=o.methods;for(var u in c)!function(t){var r=c[t];t in a&&console.warn("### App Framework ### 模块"+n+"的接口函数"+t+"---- 重复定义"),a[t]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(e instanceof Bs&&!e._defined)throw new Error("请确认Native方法调用["+o.name+"."+r.name+"()]发生在应用app的生命周期的创建['onCreate()']之后");return Z(e,o.name,r.name,r.mode,t,o.type)},global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### require---- 模块"+n+"接口函数"+t)}(u);var p=o.attributes;for(var f in p)!function(e){var t=p[e];Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:function(){if(t[1])return a[t[1].name]();console.warn("### App Framework ### 模块"+n+"的接口属性("+e+")不可读")},set:function(r){if(t[2]){var o=a[t[2].name]({value:r});return void 0===o?r:o}console.warn("### App Framework ### 模块"+n+"的接口属性("+e+")不可写")}})}(f);var d=o.events;for(var h in d)!function(e){var t=d[e];Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:function(){return t.cache},set:function(r){if("function"==typeof r||-1!==[null,void 0].indexOf(r)){var o=a[t.name]({success:r});return t.cache=r,void 0===o?r:o}console.warn("### App Framework ### 模块"+n+"的接口事件("+e+")值类型必须是函数或null")}})}(h)}}),0===Object.keys(i).length)throw new Error("请确认引入的模块["+t+"]：名称正确并且在manifest.json的features中声明");return i}function re(e,t,r,n){if(!e||!t)return void console.warn("### App Framework ### defineCustomComponent() app或inst不存在");var o=ae(e,t.id);o[r]&&console.warn("### App Framework ### 组件 ("+r+") 被重复注册"),o[r]=n}function ne(e,t,r){return e&&t?ae(e,t.id)[r]:void console.warn("### App Framework ### requireCustomComponent() app或inst不存在")}function oe(e,t,r){if(!e||!t)return void console.warn("### App Framework ### removeCustomComponent() app或inst不存在");var n=ae(e,t.id);if(r)global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### removeCustomComponent() 删除id="+t.id+"上注册的自定义组件("+r+"):"+!!n[r]),delete n[r];else for(var o in n)global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### removeCustomComponent() 删除id="+t.id+"上注册的自定义组件("+o+"):"+!!n[o]),delete n[o]}function ae(e,t){var r=e.customComponentMap;return r[t]=r[t]||{},r[t]}function ie(e){console.log("### App Framework ### 重建页面("+e.id+")----");var t=e.vm,r=e.doc;if(!t||!r)return console.error("### App Framework ### 页面("+e.id+")缺少dom数据"),new Error("recreatePage: 无效数据");r.recreateActions(),he(e),r.listener.createFinish()}function le(e,t){console.log("### App Framework ### 刷新页面("+e.id+")----");var r=e.vm;return r||console.error("### App Framework ### 页面("+e.id+")没有Vm"),r&&t?("function"==typeof r.onUpdateData?r.onUpdateData(t):x(r,t),he(e),void e.doc.listener.refreshFinish()):r?void console.warn("### App Framework ### 页面("+e.id+")刷新数据为空"):new Error("refreshPage: 无效数据")}function se(e){console.log("### App Framework ### 销毁页面("+e.id+")----"),e.vm&&ce(e.vm),oe(e.app,e),e.intent=null,e.vm=null,e.doc.destroy(),e.doc=null,e.callbacks=null,e.differ=null,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 成功销毁页面("+e.id+")----")}function ce(e){if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 销毁VM("+e.__id__+":"+e._type+")"),e.$emit("xlc:onDestroy"),e._valid=!1,e._visible=!1,delete e._page,delete e._css,delete e._props,delete e._data,delete e._ids,delete e._methods,delete e._options,delete e._parent,delete e._root,delete e._parentElement,delete e._rootElement,e._parentWatchers){for(var t=e._parentWatchers.length;t--;)e._parentWatchers[t].close();delete e._parentWatchers}if(e._watchers){for(var r=e._watchers.length;r--;)e._watchers[r].close();delete e._watchers}if(e._childrenVms){for(var n=e._childrenVms.length;n--;)ce(e._childrenVms[n]);delete e._childrenVms}delete e._type,delete e._vmEvents}function ue(e,t){if(e&&(e._visible=t,e._childrenVms))for(var r=e._childrenVms.length;r--;)ue(e._childrenVms[r],t)}function pe(e,t){void 0===t&&(t=!1);var r=e.doc||{},n=r.body||{};return n.toJSON?n.toJSON(t):{}}function fe(e,t,r,n,o){if(!e.vm)return new Error("fireEvent: 只有Page才能发送Dom事件");if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 向页面("+e.id+") 的节点("+t+')发送事件 "'+r+'"---- '+JSON.stringify(o)),Array.isArray(t))return void t.some(function(t){return!1!==fe(e,t,r,n)});var a=e.doc.getRef(t);if(a){var i=e.doc.fireEvent(a,r,n,{attrs:o});return he(e)&&e.doc.listener.updateFinish(),i}return new Error('fireEvent: 无效element索引 "'+t+'"')}function de(e,t,r,n){if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 调用页面("+e.id+")的回调("+t+") 参数：",r),!e.callbacks)return new Error('invoke: 回调函数 "'+t+'" 没有注册');if(e.vm&&!e.vm.$valid)return void console.error("invoke: 回调函数所属对象("+e.id+")已经无效, 终止回调执行");var o=e.callbacks[t];if("function"==typeof o){var a=o(r);if(void 0!==n&&!1!==n||(e.callbacks[t]=void 0),e.doc){he(e)&&e.doc.listener.updateFinish()}return a}return new Error('callback: 无效回调函数Id "'+t+'"')}function he(e){var t=!1;if(e.doc&&e.differ&&e.doc.listener){if(e.differ.isEmpty()||e.differ.flush(),e.doc.listener.updates.length){var r=e.doc.listener.updates.splice(0);e.doc.listener.updates=[],ve(e,r)}t=e.doc.listener.hasActions()}return t}function ve(e,t){"array"!==z(t)&&(t=[t]);var r=[];t.forEach(function(t){t.args=t.args.map(function(t){return ge(t,e)}),r.push(t),r.length>=50&&(Js.sendActions(e.id,JSON.stringify(r),"-1"),r=[])}),r.length>0&&Js.sendActions(e.id,JSON.stringify(r),"-1")}function ge(e,t){switch(z(e)){case"undefined":case"null":return"";case"regexp":return e.toString();case"date":return e.toISOString();case"number":case"string":case"boolean":case"array":return e;case"object":if(e instanceof Js.DomElement)return e.ref;var r={};for(var n in e)r[n]=ge(e[n],t);return r;case"function":var o=G();return t.callbacks?t.callbacks[o]=e:global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### normalize() 页面已经销毁，不再注册回调"),o.toString();default:return JSON.stringify(e)}}function me(e,t){var r=e[t];for(var n in r)r[n]()}function ye(e,t){var r=e[t];for(var n in r){r[n].forEach(function(e){e()})}}function be(e,t){e.__proto__=t}function Ee(e,t,r){for(var n=0,o=r.length;n<o;n++){var a=r[n];N(e,a,t[a])}}function we(e,t,r,n){var o=new Xs,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var i=a&&a.get,l=a&&a.set,s=Qs.$ob(r);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=i?i.call(e):r;if(Xs.target&&(o.depend(),s&&s.dep.depend(),Array.isArray(t)))for(var n=void 0,a=0,l=t.length;a<l;a++)(n=t[a])&&n.__ob__&&n.__ob__.dep.depend();return t},set:function(t){t!==(i?i.call(e):r)&&(n&&n(),l?l.call(e,t):r=t,s=Qs.$ob(t),o.notify())}})}}function _e(e,t){for(var r,n=e.length-1;n>=0;n--){if(!(r=Fe(e[n],n===e.length-1?[t]:r))||0===r.length)return!1}return!0}function Fe(e,t){var r=e.type;switch(r){case"attribute":return Ae(e,t);case"tag":return ke(e,t);case"descendant":return Se(e,t);case"child":return Oe(e,t);default:return console.warn("未知的CSS选择器定义类型："+r+"，当前支持：tag, class, id, 后代, '>'"),[]}}function Ae(e,t){if("class"===e.name){if("element"===e.action)return t.filter(function(t){return-1!==t.classList.indexOf(e.value)})}else if("id"===e.name)return t.filter(function(t){return t.id===e.value});return console.warn("未知的CSS选择器属性类型："+e.name+"，当前支持：class, id"),[]}function ke(e,t){return t.filter(function(t){return t.type===e.name})}function Se(e,t){var r=[];return t.forEach(function(e){for(;(e=e.renderParent())&&e.nodeType===us.nodeType.Element;)r.push(e)}),r}function Oe(e,t){var r=[];return t.forEach(function(e){var t=e.renderParent();t&&t.nodeType===us.nodeType.Element&&r.push(t)}),r}function Le(e){var t=e.type,r=rc[t];if("object"==typeof r)for(var n in r)if(null==e[n])e[n]=r[n];else if("object"===z(e[n])&&"object"===z(r[n]))for(var o in r[n])null==e[n][o]&&(e[n][o]=r[n][o])}function Ce(e,t,r){De(e,t,r.attr.id,e),Be(e,t,r.attr),We(e,t,r),Xe(e,t,r.events)}function xe(e,t,r){Ge(e,t)}function Ne(e,t,r,n){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 处理自定义组件 ----",JSON.stringify(r)),t=t||{},r=r||{};var o=t._options||{},a=o.props;Array.isArray(a)&&(a=a.reduce(function(e,t){return U(t)&&console.warn("### App Framework ### props 属性 '"+t+"' 是保留字, 可能会导致应用运行异常"),e[t]=!0,e},{})),Pe(r.events,e,t),Te(n,a,e,t),Te(r.attr,a,e,t)}function Ie(e,t,r,n){void 0===n&&(n={}),je(r,e,t),n.children?n.children[n.children.length-1]._vm=t:n._vm=t}function Te(e,t,r,n){if(e){var o=n._props;for(var a in e)!function(a){if(!t||t[a]){var i=e[a];"function"==typeof i?function(){var e=!1,t=tt(r,i,function(t){e=!0,o[a]=t,e=!1});n._parentWatchers.push(t);var l=t.value;we(o,a,l,function(t){e||console.error("### App Framework ### Props 禁止修改props中的："+a+"!如需改变，请额外在data中使用另一个名称声明")})}():we(o,a,i),R(n,"_props",a)}}(a)}}function je(e,t,r){$e(e.classList,t,r),Re(e.style,t,r)}function Pe(e,t,r){for(var n in e)!function(n){var o=e[n];r.$on(Ls(n),function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];t&&t[o]&&"function"==typeof t[o]?t[o].apply(t,e):console.warn("### App Framework ### 组件Vm 子组件绑定了父组件不存在的方法：'"+o+"'")})}(n)}function Re(e,t,r){if(!r._rootElement){for(var n in e)!function(n){var o=e[n];if("function"==typeof o){var a=tt(t,o,function(e){r._rootElement&&r._rootElement.setStyle(n,e)});r._parentWatchers.push(a);var i=a.value;r._rootElement.setStyle(n,i)}else r._rootElement.setStyle(n,o)}(n)}}function $e(e,t,r){function n(e,t){"array"===z(e)&&e.unshift(t)}var o=t._options&&t._options.style||{};if(r._rootElement){var a="@appRootElement";if(o[a]=r._rootElement.classStyle,"function"==typeof e){var i=tt(t,e,function(e){n(e,a),Ve(r._rootElement,o,e)});r._parentWatchers.push(i);var l=i.value;n(l,a),Ve(r._rootElement,o,l)}else if(null!=e){if("array"!==z(e))return new Error("mergeClassStyle: classList的类型不是数组----",e);n(e,a),Ve(r._rootElement,o,e)}}}function De(e,t,r,n){if(r){var o=Object.create(null);if(Object.defineProperties(o,{vm:{value:n,writable:!1,configurable:!1},element:{get:function(){return t||n._rootElement},configurable:!1}}),"function"==typeof r){var a=r;r=a.call(e),r&&(e._ids[r]=o);var i=tt(e,a,function(t){t&&(e._ids[t]=o)},t);e!==n&&n._parentWatchers&&n._parentWatchers.push(i)}else"string"==typeof r&&(e._ids[r]=o)}}function Be(e,t,r){Ye(e,t,"attr",r)}function We(e,t,r){Me(e,t,r.type),qe(e,t,r.classList),ze(e,t,r.attr.id),Ue(e,t,r.style)}function Me(e,t,r){var n=e._options&&e._options.style||{},o=n[r],a={};o&&Object.keys(o).forEach(function(e){var t=o[e];if(a[e]=t,"animationName"===e){var r=Ze(t,n);r&&(a.animationKeyframes=r)}}),t.setTagStyle(a)}function Je(e,t,r){var n="#"+r,o={},a=t[n];a&&Object.keys(a).forEach(function(e){var r=a[e];if(o[e]=r,"animationName"===e){var n=Ze(r,t);n&&(o.animationKeyframes=n)}}),e.setIdStyle(o)}function ze(e,t,r){if("function"==typeof r||"string"==typeof r){var n=e._options&&e._options.style||{};if("function"==typeof r){var o=tt(e,r,function(r){t.setId(r),Ge(e,t),Je(t,n,r)},t),a=o.value;t.setId(a),Je(t,n,a)}else t.setId(r),Je(t,n,r)}}function Ve(e,t,r){for(var n={},o=r.length,a=Object.keys(t),i=0;i<o;i++)!function(e){var o="."+r[e],i=t[o];i&&(n[o]=A({name:o,order:a.indexOf(o),style:{}}),Object.keys(i).forEach(function(e){var r=i[e];if(n[o].style[e]=r,"animationName"===e){var a=Ze(r,t);a&&(n[o].style.animationKeyframes=a)}}))}(i);e.setClassStyle(n)}function qe(e,t,r){if("function"==typeof r||Array.isArray(r)){if(Array.isArray(r)&&!r.length)return void t.setClassStyle({});var n=e._options&&e._options.style||{};if("function"==typeof r){var o=tt(e,r,function(r){t.setClassList(r),Ge(e,t),Ve(t,n,r)},t),a=o.value;t.setClassList(a),Ve(t,n,a)}else t.setClassList(r),Ve(t,n,r)}}function Ue(e,t,r){"function"==typeof r?Ye(e,t,"styles",r):Ye(e,t,"style",r)}function Ge(e,t){var r=e._options&&e._options.style||{},n=e._css.selector;if(0!==n.hashList.length&&t.nodeType===us.nodeType.Element){var o={};t.id&&n.typeList.idList&&He(t,n.typeList.idList,o,r),t.classList.length>0&&n.typeList.classList&&He(t,n.typeList.classList,o,r),n.typeList.tagList&&He(t,n.typeList.tagList,o,r),t.setCompoundStyle(o)}}function He(e,t,r,n){for(var o=0;o<t.length;o++){var a=t[o];if(e.depth>=a.score.depth&&_e(a.meta.ruleDef,e)){r[a.name]=Object.assign({},a),r[a.name].style=Object.assign({},r[a.name].style);var i=r[a.name].style;if(i.animationName){var l=Ze(i.animationName,n);l&&(i.animationKeyframes=l)}}}}function Ze(e,t){var r=t["@KEYFRAMES"];if(r){var n=r[e];if(n)return JSON.stringify(n)}return null}function Ke(e,t,r,n){t.addEvent(r,j(n,e))}function Xe(e,t,r){if(r)for(var n=Object.keys(r),o=n.length;o--;){var a=n[o],i=r[a];"string"==typeof i&&((i=e[i])||console.warn('### App Framework ### 没有找到回调事件 "'+a+'".')),"function"==typeof i?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 绑定回调事件---- "+a),Ke(e,t,a,i)):console.warn('### App Framework ### 回调事件 "'+a+'" 必须是函数')}}function Ye(e,t,r,n){if(n){if("function"==typeof n)return void et(e,t,r,n);for(var o=e._options&&e._options.style||{},a=Object.keys(n),i=a.length;i--;){var l=a[i],s=n[l];if("function"==typeof s)Qe(e,t,r,l,s);else if(t[nc[r]](l,s),"style"===r&&"animationName"===l){var c=Ze(s,o);c&&t.setStyle("animationKeyframes",c)}}}}function Qe(e,t,r,n,o){var a=nc[r],i=e._options&&e._options.style||{},l=tt(e,o,function(o){function l(){if(t[a](n,o),"style"===r&&"animationName"===n){var e=Ze(o,i);e&&t.setStyle("animationKeyframes",e)}}var s=e&&e._page&&e._page.differ;s?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 数据绑定----"+n),s.append("element",t.depth,t.ref,l)):l()},t),s=l.value;if(t[a](n,s),"style"===r&&"animationName"===n){var c=Ze(s,i);c&&t.setStyle("animationKeyframes",c)}}function et(e,t,r,n){var o=nc[r],a=tt(e,n,function(n){function a(){t[o](n)}var i=e&&e._page&&e._page.differ;i?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 数据绑定----"+r),i.append("element",t.depth,t.ref,a)):a()},t),i=a.value;t[o](i)}function tt(e,t,r,n){var o=new tc(e,t,function(e,t){"object"!=typeof e&&e===t||r(e)});return rt(n,o),o}function rt(e,t){e&&(e.bindWatcherList=e.bindWatcherList||[],e.bindWatcherList.push(t))}function nt(e,t){void 0===t&&(t=!1);for(var r=e.children.slice(),n=0,o=r.length;n<o;n++){nt(r[n],!1)}if(!t){if(e.bindWatcherList){for(var a=e.bindWatcherList.slice(),i=0,l=a.length;i<l;i++){e.bindWatcherList[i].close()}delete e.bindWatcherList}if(e._vm&&e._vm._parentWatchers){for(var s=0,c=e._vm._parentWatchers.length;s<c;s++){e._vm._parentWatchers[s].close()}e._vm._parentWatchers=[]}}}function ot(e,t){return e._page.doc.createBody(t)}function at(e,t){return e._page.doc.createElement(t)}function it(e,t){var r=e._page.doc,n=r.createFragment();return t.appendChild(n),n}function lt(e,t,r){if(r)return r.moveChild(e,t)}function st(e,t){void 0===t&&(t=!1);var r=e.parentNode;r&&r.removeChild(e,t),e._vm&&e._vm.$emit("xlc:onDestroy")}function ct(e){return e=e.replace(/&forall;/g,"∀"),e=e.replace(/&part;/g,"∂"),e=e.replace(/&exists;/g,"∃"),e=e.replace(/&empty;/g,"∅"),e=e.replace(/&nabla;/g,"∇"),e=e.replace(/&isin;/g,"∈"),e=e.replace(/&notin;/g,"∉"),e=e.replace(/&ni;/g,"∋"),e=e.replace(/&prod;/g,"∏"),e=e.replace(/&sum;/g,"∑"),e=e.replace(/&minus;/g,"−"),e=e.replace(/&lowast;/g,"∗"),e=e.replace(/&radic;/g,"√"),e=e.replace(/&prop;/g,"∝"),e=e.replace(/&infin;/g,"∞"),e=e.replace(/&ang;/g,"∠"),e=e.replace(/&and;/g,"∧"),e=e.replace(/&or;/g,"∨"),e=e.replace(/&cap;/g,"∩"),e=e.replace(/&cap;/g,"∪"),e=e.replace(/&int;/g,"∫"),e=e.replace(/&there4;/g,"∴"),e=e.replace(/&sim;/g,"∼"),e=e.replace(/&cong;/g,"≅"),e=e.replace(/&asymp;/g,"≈"),e=e.replace(/&ne;/g,"≠"),e=e.replace(/&le;/g,"≤"),e=e.replace(/&ge;/g,"≥"),e=e.replace(/&sub;/g,"⊂"),e=e.replace(/&sup;/g,"⊃"),e=e.replace(/&nsub;/g,"⊄"),e=e.replace(/&sube;/g,"⊆"),e=e.replace(/&supe;/g,"⊇"),e=e.replace(/&oplus;/g,"⊕"),e=e.replace(/&otimes;/g,"⊗"),e=e.replace(/&perp;/g,"⊥"),e=e.replace(/&sdot;/g,"⋅")}function ut(e){return e=e.replace(/&Alpha;/g,"Α"),e=e.replace(/&Beta;/g,"Β"),e=e.replace(/&Gamma;/g,"Γ"),e=e.replace(/&Delta;/g,"Δ"),e=e.replace(/&Epsilon;/g,"Ε"),e=e.replace(/&Zeta;/g,"Ζ"),e=e.replace(/&Eta;/g,"Η"),e=e.replace(/&Theta;/g,"Θ"),e=e.replace(/&Iota;/g,"Ι"),e=e.replace(/&Kappa;/g,"Κ"),e=e.replace(/&Lambda;/g,"Λ"),e=e.replace(/&Mu;/g,"Μ"),e=e.replace(/&Nu;/g,"Ν"),e=e.replace(/&Xi;/g,"Ν"),e=e.replace(/&Omicron;/g,"Ο"),e=e.replace(/&Pi;/g,"Π"),e=e.replace(/&Rho;/g,"Ρ"),e=e.replace(/&Sigma;/g,"Σ"),e=e.replace(/&Tau;/g,"Τ"),e=e.replace(/&Upsilon;/g,"Υ"),e=e.replace(/&Phi;/g,"Φ"),e=e.replace(/&Chi;/g,"Χ"),e=e.replace(/&Psi;/g,"Ψ"),e=e.replace(/&Omega;/g,"Ω"),e=e.replace(/&alpha;/g,"α"),e=e.replace(/&beta;/g,"β"),e=e.replace(/&gamma;/g,"γ"),e=e.replace(/&delta;/g,"δ"),e=e.replace(/&epsilon;/g,"ε"),e=e.replace(/&zeta;/g,"ζ"),e=e.replace(/&eta;/g,"η"),e=e.replace(/&theta;/g,"θ"),e=e.replace(/&iota;/g,"ι"),e=e.replace(/&kappa;/g,"κ"),e=e.replace(/&lambda;/g,"λ"),e=e.replace(/&mu;/g,"μ"),e=e.replace(/&nu;/g,"ν"),e=e.replace(/&xi;/g,"ξ"),e=e.replace(/&omicron;/g,"ο"),e=e.replace(/&pi;/g,"π"),e=e.replace(/&rho;/g,"ρ"),e=e.replace(/&sigmaf;/g,"ς"),e=e.replace(/&sigma;/g,"σ"),e=e.replace(/&tau;/g,"τ"),e=e.replace(/&upsilon;/g,"υ"),e=e.replace(/&phi;/g,"φ"),e=e.replace(/&chi;/g,"χ"),e=e.replace(/&psi;/g,"ψ"),e=e.replace(/&omega;/g,"ω"),e=e.replace(/&thetasym;/g,"ϑ"),e=e.replace(/&upsih;/g,"ϒ"),e=e.replace(/&piv;/g,"ϖ"),e=e.replace(/&middot;/g,"·")}function pt(e){return e=e.replace(/&nbsp;/g," "),e=e.replace(/&quot;/g,"'"),e=e.replace(/&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">")}function ft(e){return e=e.replace(/&OElig;/g,"Œ"),e=e.replace(/&oelig;/g,"œ"),e=e.replace(/&Scaron;/g,"Š"),e=e.replace(/&scaron;/g,"š"),e=e.replace(/&Yuml;/g,"Ÿ"),e=e.replace(/&fnof;/g,"ƒ"),e=e.replace(/&circ;/g,"ˆ"),e=e.replace(/&tilde;/g,"˜"),e=e.replace(/&ensp;/g,""),e=e.replace(/&emsp;/g,""),e=e.replace(/&thinsp;/g,""),e=e.replace(/&zwnj;/g,""),e=e.replace(/&zwj;/g,""),e=e.replace(/&lrm;/g,""),e=e.replace(/&rlm;/g,""),e=e.replace(/&ndash;/g,"–"),e=e.replace(/&mdash;/g,"—"),e=e.replace(/&lsquo;/g,"‘"),e=e.replace(/&rsquo;/g,"’"),e=e.replace(/&sbquo;/g,"‚"),e=e.replace(/&ldquo;/g,"“"),e=e.replace(/&rdquo;/g,"”"),e=e.replace(/&bdquo;/g,"„"),e=e.replace(/&dagger;/g,"†"),e=e.replace(/&Dagger;/g,"‡"),e=e.replace(/&bull;/g,"•"),e=e.replace(/&hellip;/g,"…"),e=e.replace(/&permil;/g,"‰"),e=e.replace(/&prime;/g,"′"),e=e.replace(/&Prime;/g,"″"),e=e.replace(/&lsaquo;/g,"‹"),e=e.replace(/&rsaquo;/g,"›"),e=e.replace(/&oline;/g,"‾"),e=e.replace(/&euro;/g,"€"),e=e.replace(/&trade;/g,"™"),e=e.replace(/&larr;/g,"←"),e=e.replace(/&uarr;/g,"↑"),e=e.replace(/&rarr;/g,"→"),e=e.replace(/&darr;/g,"↓"),e=e.replace(/&harr;/g,"↔"),e=e.replace(/&crarr;/g,"↵"),e=e.replace(/&lceil;/g,"⌈"),e=e.replace(/&rceil;/g,"⌉"),e=e.replace(/&lfloor;/g,"⌊"),e=e.replace(/&rfloor;/g,"⌋"),e=e.replace(/&loz;/g,"◊"),e=e.replace(/&spades;/g,"♠"),e=e.replace(/&clubs;/g,"♣"),e=e.replace(/&hearts;/g,"♥"),e=e.replace(/&diams;/g,"♦"),e=e.replace(/&#8203;/g,"")}function dt(e){return e=e.replace(/\r\n/g,""),e=e.replace(/\n/g,"")}function ht(e){return e=ct(e),e=ut(e),e=pt(e),e=ft(e),e=dt(e)}function vt(e){for(var t={},r=e.split(","),n=0;n<r.length;n++)t[r[n]]=!0;return t}function gt(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function mt(e){
return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}function yt(e,t){var r=[];if(t)switch(e.forEach(function(e,t){r[t]={},r[t].n=e}),t.length){case 1:e.forEach(function(e,n){r[n].v=t[0]});break;case 2:e.forEach(function(e,n){r[n].v=n%2?t[1]:t[0]});break;case 3:e.forEach(function(e,n){r[n].v=n%2?t[1]:t[n]});break;default:e.forEach(function(e,n){r[n].v=t[n]})}return r}function bt(e){return"number"==typeof e||"string"==typeof e}function Et(e,t){function r(e,r,o,a){if(r=r.toLowerCase(),sc[r])for(;l.last()&&cc[l.last()];)n("",l.last());if(uc[r]&&l.last()===r&&n("",r),a=lc[r]||!!a,a||l.push(r),t.start){var i=[];o.replace(ic,function(e,t){var r=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:pc[t]?t:"";i.push({name:t,value:r,escaped:r.replace(/(^|[^\\])"/g,'$1\\"')})}),t.start&&t.start(r,i,a)}}function n(e,r){var n=0;if(r)for(r=r.toLowerCase(),n=l.length-1;n>=0&&l[n]!==r;n--);if(n>=0){for(var o=l.length-1;o>=n;o--)t.end&&t.end(l[o]);l.length=n}}var o,a,i,l=[],s=e;for(l.last=function(){return this[this.length-1]};e;){if(a=!0,l.last()&&fc[l.last()])e=e.replace(new RegExp("([\\s\\S]*?)(</"+l.last()+"[^>]*>)","i"),function(e,r){return r=r.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1"),t.text&&t.text(r),""}),n("",l.last());else if(0===e.indexOf("\x3c!--")?(o=e.indexOf("--\x3e"))>=0&&(t.comment&&t.comment(e.substring(4,o)),e=e.substring(o+3),a=!1):0===e.indexOf("</")?(i=e.match(ac))&&(e=e.substring(i[0].length),i[0].replace(ac,n),a=!1):0===e.indexOf("<")&&(i=e.match(oc))&&(e=e.substring(i[0].length),i[0].replace(oc,r),a=!1),a){o=e.indexOf("<");for(var c="";0===o;)c+="<",e=e.substring(1),o=e.indexOf("<");c+=o<0?e:e.substring(0,o),e=o<0?"":e.substring(o),t.text&&t.text(c)}e===s&&console.error("### App Parser ### 解析错误: "+e),s=e}n()}function wt(e){return kc.enum.bind(null,e)}function _t(e,t){return kc[e].bind(null,t)}function Ft(e,t){var r,n,o=Sc[e];return"function"==typeof o?(r="function"!=typeof t?o(t):{value:t},r.reason&&(n={reason:r.reason(e,t,r.value)})):(r={value:t},n={reason:"ERROR: 样式名 `"+mt(e)+"` 不支持"}),{value:r.value instanceof Array?r.value:[{n:e,v:r.value}],log:n}}function At(e,t){var r={},n=[],o=gt(e),a=Ft(o,t);return a.value.forEach(function(e){bt(e.v)&&n.push(e)}),n&&(r.value=n),a.log&&(r.log=a.log.reason),r}function kt(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<.*!doctype.*>\n/,"").replace(/<.*!DOCTYPE.*>\n/,"")}function St(e){var t=Oc[e];return void 0!==t?t:e}function Ot(e){var t={};return Lc[e]&&(t=Lc[e]),t}function Lt(e){var t={};return Cc[e]&&(t=Cc[e]),t}function Ct(e,t){var r="html"!==t;e=kt(e),e=ht(e);var n=[],o={type:"div",children:[],events:{},classList:[],attr:{},style:{flex:1,flexDirection:"column"}};return Et(e,{start:function(e,t,a){var i={type:r?e:St(e),children:[],events:{},classList:[],attr:r?{}:Lt(e),style:r?{}:Ot(e)};if(0!==t.length&&(i.attr=t.reduce(function(e,t){var r=t.name,n=t.value;return"class"===r?i.classList=n.split(/\s+/):"style"===r?n.split(";").forEach(function(e){var t,r,n=e.trim().split(":");n.length>2&&(n[1]=n.slice(1).join(":"),n=n.slice(0,2)),2===n.length&&(t=n[0].trim(),r=At(t,n[1].trim()),r.value&&r.value.forEach(function(e){bt(e.v)&&(i.style[e.n]=e.v)}),r.log&&console.warn("### App Parser ###",r.log))}):"id"===r?i.id=n:(n.match(/ /)&&(n=n.split(" ")),e[r]?Array.isArray(e[r])?e[r].push(n):e[r]=[e[r],n]:e[r]=n),e},{})),r||"source"!==i.type||(o.source=i.attr.src),a){var l=n[0]||o;void 0===l.children&&(l.children=[]),l.children.push(i)}else n.unshift(i)},end:function(e){var t=r?e:St(e),a=n.shift();if(a.type!==t&&console.error("### App Parser ### 结束标签不匹配:",e),!r&&"video"===a.type&&o.source&&(a.attr.src=o.source,delete o.source),0===n.length)o.children.push(a);else{var i=n[0];void 0===i.children&&(i.children=[]),i.children.push(a)}},text:function(e){if(""!==e.slice().replace(/\s*/,"")){var t=n[0];if(t)if("text"===t.type){var r={type:"span",children:[],events:{},classList:[],attr:{value:e},style:{}};void 0===t.children&&(t.children=[]),t.children.push(r)}else t.attr.value=e}},comment:function(e){}}),global.Env&&"trace"===global.Env.logLevel&&console.trace("'### App Parser ### 解析"+t+"文本成功："+JSON.stringify(o)),o}function xt(e,t){return e=e.trim(),""===e&&(e="<div></div>"),xc.compile(e,t)}function Nt(e){It(e,(e._options||{}).template||{},e._parentElement),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 组件Vm ("+e._type+") UI准备就绪"),e.$emit("xlc:onReady"),e._ready=!0}function It(e,t,r,n){if(-1!==(e._page||{}).lastSignal){if(t.id&&(t.attr.id=t.attr.id||t.id),n=n||{},jt(t))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 fragment 节点 ----",JSON.stringify(t)),void Jt(e,t,r,n);if($t(t))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 slot 节点----",JSON.stringify(t)),void Wt(e,t,r);if(Tt(t))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 block 节点 ----",JSON.stringify(t)),void Mt(e,t,r,n);if(Pt(t,n))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 for 节点----",JSON.stringify(t)),void("document"===r.type?global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 根节点不支持 `for` 指令!"):zt(e,t,r));if(Rt(t,n))return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 If 节点----",JSON.stringify(t)),void("document"===r.type?global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 根节点不支持 'if' 指令!"):Vt(e,t,r,n));var o=n.type||t.type,a=Bt(e,o);if(a)return void qt(e,a,t,r,o,n);Ut(e,t,r,o)}}function Tt(e){return"block"===e.type}function jt(e){return Array.isArray(e)}function Pt(e,t){return!t.hasOwnProperty("repeat")&&e.repeat}function Rt(e,t){return!t.hasOwnProperty("shown")&&e.shown}function $t(e){return"slot"===e.type}function Dt(e){return"richtext"===e.type}function Bt(e,t){var r;return e._page&&e._page.app&&e._page.app.customComponentMap&&(r=ne(e._page.app,e._page,t)),r}function Wt(e,t,r){var n=it(e,r);if(t.attr&&t.attr.content){var o=t.attr.content,a=null;"string"==typeof o?"function"!=typeof(a=e[o])&&(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### slot的 content属性 "+o+" 有误， 找不到对应的render函数 "),a=null):"function"==typeof o?a=o:global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### slot的 content属性 "+o+" 无效"),a&&(t.children=[],t.__render=a,Xt(e,t,n))}else e._slot=n}function Mt(e,t,r,n){return n=n||{},Pt(t,n)?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 block 节点 ---- for"),void zt(e,t,r)):Rt(t,n)?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译 block 节点 ---- if"),void Vt(e,t,r,n)):void Gt(e,t,it(e,r))}function Jt(e,t,r,n){var o=it(e,r);t.forEach(function(t){It(e,t,o,n)})}function zt(e,t,r){var n=t.repeat,o=n.exp||n;"function"!=typeof o&&(o=function(){return[]});var a=n.key||"$idx",i=n.value||"$item",l=t.attr&&t.attr.tid,s=it(e,r);s.data=[],s.vms=[],Ht(e,t,s,{getter:o,key:a,value:i,tid:l})}function Vt(e,t,r,n){var o={shown:!0},a=it(e,r);n.repeat&&(o.repeat=n.repeat),Zt(e,t,a,o)}function qt(e,t,r,n,o,a){var i=e.constructor;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译自定义组件 "+o+" ----",JSON.stringify(r));var l=new i(o,t,e,n,void 0,{"xlc:onCreate":function(){e._static&&(this._static=e._static),De(e,null,r.attr.id,this),this._externalBinding={parent:e,template:r},Ne(e,this,r,a.repeat)},"xlc:onInit":function(){},"xlc:onReady":function(){this._slot&&(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 向自定义组件 "+o+" 的slot插入子节点 ----"),Gt(e,r,this._slot))}});Ie(e,l,r,n)}function Ut(e,t,r,n){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译原生组件----",JSON.stringify(t)),Le(t);var o;if(r.ref===us.documentId?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译Body组件 "+n),o=ot(e,n)):(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译原生组件 "+n),o=at(e,n)),!e._rootElement){e._rootElement=o;var a=e._externalBinding||{},i=a.template,l=a.parent;if(i&&i.events&&l&&o)for(var s in i.events){var c=l[i.events[s]];c&&o.addEvent(s,j(c,l))}}Dt(t)&&(t.content=t.attr.value,t.contentType=t.attr.type),Ce(e,o,t),t.attr&&t.attr.append&&(t.append=t.attr.append);var u="tree"===t.append,p=e._page||{};-1===p.lastSignal||u||(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译单个节点----",o),p.lastSignal=r.appendChild(o,xe.bind(null,e,o,t))),-1!==p.lastSignal&&(Dt(t)?Yt(e,t,o):Gt(e,t,o)),-1!==p.lastSignal&&u&&(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译整个树----",o),p.lastSignal=r.appendChild(o,xe.bind(null,e,o,t)))}function Gt(e,t,r){var n=e._page||{},o=t.children;o&&o.length&&o.every(function(t){return It(e,t,r),-1!==n.lastSignal})}function Ht(e,t,r,n){function o(e,n,o){var i={};i[u]=n,i[p]=e;var l=er(o,i);a.push(l),It(l,t,r,{repeat:e})}var a=r.vms,i=r.children,l=r.layoutChildren,s=n.getter,c=n.tid,u=n.key,p=n.value,f=Qt(e,r,s,"for",function(t){if(r&&t){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### For 节点被改变----",t);var n=i.slice(),s=a.slice(),f=r.data.slice(),d={},h={};t.forEach(function(e,t){var r="@"+(c?e[c]:t);if(null==r||"@"===r)return void console.error("### App Framework ### for 循环数据的tid 属性不存在或为空");d[r]||(d[r]=[]),d[r].push(e),d[r].length>1&&console.warn("### App Framework ### for 循环数据的tid 属性 '"+r+" 不唯一, 可能导致性能问题")});var v=[];f.forEach(function(e,t){var r="@"+(c?e[c]:t),o=d[r];o&&o.length>0?(h[r]||(h[r]=[]),h[r].push({item:e,index:t,key:r,target:n[t],vm:s[t]}),v.push(e)):rr(n[t])}),i.length=0,l.length=0,a.length=0,r.data=t.slice(),t.forEach(function(t,n){var l="@"+(c?t[c]:n),s=h[l];if("object"==typeof s&&s.length>0){var f=s.shift();f.item===v[0]?v.shift():v.$remove(f.item),i.push(f.target),lt(f.target,n,r),a.push(f.vm),f.vm[p]=t,f.vm[u]=n}else o(t,n,e)})}});f&&f.length>0?(r.data=f.slice(0),f.forEach(function(t,r){o(t,r,e)})):r.data=[]}function Zt(e,t,r,n){var o=Qt(e,r,t.shown,"if",function(o){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### If 节点 ("+r.ref+")状态改变----",o),r&&!!r.display!=!!o&&(r.display=!!o,o?It(e,t,r,n):rr(r,!0))});r.display=!!o,o&&It(e,t,r,n)}function Kt(e,t,r){r?(rr(t,!0),It(e,r,t)):rr(t,!0)}function Xt(e,t,r){var n=Qt(e,r,t.__render,"render",function(t){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Slot 节点 ("+r.ref+")内容更新 ----"),Kt(e,r,t),r.content=t});r.content=n,n&&It(e,n,r)}function Yt(e,t,r){var n,o=t.contentType,a=it(e,r);if((n="function"==typeof t.content?Qt(e,a,t.content,"html",function(t){if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Html 节点 ("+a.ref+")数据改变----",t),rr(a,!0),t&&"html"!==o){var r=xt(t,o);It(e,r,a)}}):t.content)&&"html"!==o){var i=xt(n,o);It(e,i,a)}}function Qt(e,t,r,n,o){var a=e&&e._page&&e._page.differ,i=t.depth||1,l={};return tt(e,r,function(r){l.latestValue=r,a&&!l.recorded&&(l.recorded=!0,a.append(n,i,t.ref,function(){var t=l.latestValue;e.$valid?o(t):console.error("### App Framework ### 试图更新已销毁页面"),l.recorded=!1,l.latestValue=void 0}))},t).value}function er(e,t){var r=Object.create(e);return r._data=t,tr(r),r._realParent=e,e._static&&(r._static=e._static),r}function tr(e){e._watchers=[];var t=e._data;B(t)||(t={});for(var r=Object.keys(t),n=["$idx","$item","$evt"],o=r.length;o--;)!function(){var t=r[o];n.indexOf(t)>-1||!W(t)?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(r){e._data[t]=r}}):console.error("### App Framework ### 页面数据属性名 '"+t+"' 非法, 属性名不能以$或_开头")}();Qs.$ob(t,e);var a=e._methods;if(a)for(var i in a)e[i]=a[i]}function rr(e,t){void 0===t&&(t=!1),nt(e,t),st(e,t)}function nr(e,t){if(!e._parent&&t){if(!e._options._descriptor)return void x(e._data,t);var r=e._page.intent&&e._page.intent.fromExternal;e._page.intent&&void 0!==e._page.intent.fromExternal||(r=!0),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 页面VM中声明的权限定义："+JSON.stringify(e._options._descriptor));for(var n in t){var o=e._options._descriptor[n];if(o){var a=r&&Nc.indexOf(o.access)>0,i=!r&&Nc.indexOf(o.access)>1;a||i?console.warn("### App Framework ### 传递外部数据"+n+"在VM中声明为"+o.access+"，放弃更新"):(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 传递外部数据"+n+"，原值为:"+JSON.stringify(e._data[n])),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 传递外部数据"+n+"，新值为:"+JSON.stringify(t[n])),e._data[n]=t[n])}else global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 传递外部数据"+n+"在VM中未声明，放弃更新")}}}function or(e){e._watchers=[];var t=e._data;B(t)||(t={});for(var r=Object.keys(t),n=r.length;n--;){var o=r[n];U(o)&&console.warn("### App Framework ### data 属性 '"+o+"' 是保留字, 可能会导致应用运行异常"),T(e._props,o)?console.warn("### App Framework ### data 请在data中使用另一个名称声明："+o+"，不要与props重复"):R(e,"_data",r[n])}Qs.$ob(t,e);var a=e._methods;if(a)for(var i in a)e[i]=a[i]}function ar(e,t){var r=e._options||{},n=r.events||{};for(var o in n)e.$on(o,n[o]);for(var a in t)e.$on(a,t[a]);ys.reserveEvents.forEach(function(t){e.$on("xlc:"+t,r[t])})}function ir(e){var t=Object.keys(e||{}),r=[],n={};for(var o in e)if(e[o]._meta){var a=Object.assign({},e[o]),i=a._meta;r[o]=k({name:o,meta:i,order:void 0!==i.order?i.order:t.indexOf(o),style:a,score:null}),r.push(o),delete a._meta;var l=S(r[o].meta.ruleDef),s=l[l.length-1];r[o].score=r[o].meta.score||O(l),"tag"===s.type?(n.tagList=n.tagList||[],n.tagList.push(r[o])):"attribute"===s.type&&"id"===s.name?(n.idList=n.idList||[],n.idList.push(r[o])):"attribute"===s.type&&"class"===s.name?(n.classList=n.classList||[],n.classList.push(r[o])):console.warn("无法识别的CSS选择器："+o)}return{hashList:r,typeList:n}}function lr(e,t,r){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 开始初始化App("+e.id+")----初始化数据：",JSON.stringify(r));var n,o,a=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return Rc.apply(void 0,[e].concat(t))},i=function(t,o){n=Pc(e,t,o,r),console.log("### App Framework ### 完成App初始化("+e.id+")----")},l=function(t){return te(e,V(t))};"function"==typeof t?o=t:t&&(o=t.toString(),o='(function(global){"use strict"; '+o+" })(Object.create(this))"),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 开始编译代码----");var s=global.Env;return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译配置代码----",JSON.stringify(s)),global.$app_define$=a,global.$app_bootstrap$=i,global.$app_require$=l,o(),n}function sr(e,t,r){var n=e,o={};return{setTimeout:function(e,a){var i=r(e,n),l=function(){t(n,i)},s=global.setTimeoutWrap(n.id,l,a||0);return o[s.toString()]=i,s.toString()},setInterval:function(e,a){var i=r(e,n),l=function(){t(n,i,null,!0)},s=global.setIntervalWrap(n.id,l,a||0);return o[s.toString()]=i,s.toString()},clearTimeout:function(e){global.clearTimeoutWrap(e),o[e]=void 0},clearInterval:function(e){global.clearIntervalWrap(e),o[e]=void 0},requestAnimationFrame:function(e){var a=r(e,n),i=function(){t(n,a)},l=global.requestAnimationFrameWrap(n.id,i);return o[l.toString()]=a,l.toString()},cancelAnimationFrame:function(e){global.cancelAnimationFrameWrap(e),o[e]=void 0}}}function cr(e,t,r){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 开始初始化页面("+e.id+")---- ",JSON.stringify(r));var n,o,a=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return Dc.apply(void 0,[e].concat(t))},i=function(t,o){n=$c(e,t,o,r),he(e),e.doc.listener.createFinish(),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 完成实例初始化("+e.id+")----")},l=(e.doc,function(t){return te(e.app,V(t))});"function"==typeof t?o=t:t&&(o=t.toString(),o='(function(global){"use strict"; '+o+" })(Object.create(this))"),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 开始编译代码----");var s=global.Env;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 编译配置代码----",JSON.stringify(s));var c=sr(e,de,ge);return global.$app_define$=a,global.$app_bootstrap$=i,global.$app_require$=l,global.setTimeout=c.setTimeout,global.setInterval=c.setInterval,global.clearTimeout=c.clearTimeout,global.clearInterval=c.clearInterval,global.requestAnimationFrame=c.requestAnimationFrame,global.cancelAnimationFrame=c.cancelAnimationFrame,o(),n}function ur(e,t,r,n){var o=Bc[e];r=r||{};var a;return o?a=new Error('createApplication: 无效应用Id "'+e+'"'):(o=new Bs(e,r),Bc[e]=o,a=lr(o,t,n)),a}function pr(e){return Wc[e]}function fr(e,t,r,n,o){var a=Bc[t];if(!a)return new Error('createPage: 无效应用Id "'+t+'"');Xs.resetTarget();var i,l=Wc[e];return l?i=new Error('createPage: 无效页面Id "'+e+'"'):(l=new Hs(e,a,o),Wc[e]=l,i=cr(l,r,n)),i}function dr(e){"string"==typeof e&&(e=JSON.parse(e));var t=X(e.callback);if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 处理invoke回调----",JSON.stringify(t)),t){var r=Wc[t.instance];if(r||(r=Bc[t.instance]),r){var n=[r,e.callback,e.data,t.preserved];return H.apply(void 0,n)}}return new Error('processInvokeCallback: 无效invoke回调Id "'+(t&&t.instance)+'"')}function hr(e,t){if(!Array.isArray(t))return new Error('processCallbacks: 无效任务回调数据 "'+e+'"');var r=Wc[e];if(r||(r=Bc[e]),r){var n=[];return t.forEach(function(e){var t=Mc[e.action],o=[].concat(e.args);"function"==typeof t?(o.unshift(r),n.push(t.apply(void 0,o))):(console.error("### App Framework ### 无法识别的回调函数类型 ("+e.action+")"),n.push("invalid"))}),n}return new Error('processCallbacks: 无效回调来源Id "'+e+'"')}function vr(e){"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)||(e=[e]),e.forEach(function(e){e&&(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 注册组件---- ",JSON.stringify(e)),"string"==typeof e?Jc[e]={type:e}:"object"==typeof e&&"string"==typeof e.type&&(Jc[e.type]=e))})}function gr(e,t){void 0===t&&(t="feature"),"string"==typeof e&&(e=JSON.parse(e)),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### registerModules---- ",JSON.stringify(e)),"object"==typeof(e=e.map(function(e){return e.__type__=t,e}))&&Q(e)}function mr(e){"string"==typeof e&&(e=JSON.parse(e)),"object"==typeof e&&ee(Tc,e)}function yr(e){var t=Wc[e];return t?pe(t):new Error('getPageRoot: 无效页面Id "'+e+'"')}function br(e){var t=Bc[e];return t?t.$def:new Error('getAppConfig: 无效应用Id "'+e+'"')}function Er(e){Js.DomDocument=e.DomDocument,Js.DomElement=e.DomElement,Js.DomFragment=e.DomFragment,Js.DomComment=e.DomComment,Js.sendActions=e.sendActions,Js.DomListener=e.DomListener}function wr(e){var t=Wc[e];return t?ie(t):new Error('recreatePage: 无效页面Id "'+e+'"')}function _r(e,t){var r,n=Wc[e];return n?(r=le(n,t),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### refreshPage ("+e+")---- ")):r=new Error('refreshPage: 无效页面Id "'+e+'"'),r}function Fr(e,t){var r=Wc[e];r?r.vm?(ue(r.vm,t),r.vm.$emit(t?"xlc:onShow":"xlc:onHide"),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### changeVisiblePage ("+e+")---- "+t+" ")):global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### changeVisiblePage 页面("+e+")创建失败, 无法响应事件---- "):console.error("### App Framework ### changeVisiblePage ----无效页面id "+e+" ")}function Ar(e){var t=Wc[e],r=!1;return t?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### backPressOnPage ("+e+")---- ",t.vm._ready),t.vm&&t.vm._ready?r=t.vm.$emit("xlc:onBackPress"):global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### backPressOnPage 页面("+e+")创建失败, 无法响应事件---- ")):console.error("### App Framework ### backPressOnPage ----无效页面id "+e+" "),!0!==r&&(r=!1),r}function kr(e){var t=Wc[e];t?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### menuPressOnPage ("+e+")---- ",t.vm._ready),t.vm&&t.vm._ready?t.vm.$emit("xlc:onMenuPress"):global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### menuPressOnPage 页面("+e+")创建失败, 无法响应事件---- ")):console.error("### App Framework ### menuPressOnPage ----无效页面id "+e+" ")}function Sr(e,t){var r=Wc[e];r?(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### orientationChangePage ("+e+")---- ",r.vm._ready),r.vm&&r.vm._ready?r.vm.$emit("xlc:onOrientationChange",t):global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### orientationChangePage 页面("+e+")创建失败, 无法响应事件---- ")):console.error("### App Framework ### orientationChangePage ----无效页面id "+e+" ")}function Or(e){Xs.resetTarget();var t=Wc[e];return t?(se(t),delete Wc[e],Wc):new Error('destroyPage: 无效页面Id "'+e+'"')}function Lr(e){var t=Bc[e];return t?(Y(t),Bc):new Error('destroyApplication: 无效应用Id "'+e+'"')}function Cr(e,t){return void 0===t&&(t=[]),{module:"dom",method:e,args:t}}function xr(e){eu[e]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];for(var n in Zc){var o=Zc[n];o&&o[e]&&o[e].apply(o,t)}}}function Nr(e){eu[e]="createApplication"===e?function(t,r,n,o){var a=Yc[t];return a?new Error("Runtime "+e+':无效应用id "'+t+'"'):(a={framework:"XApp",created:Date.now()},Yc[t]=a,n=JSON.parse(JSON.stringify(n||{})),n.env=JSON.parse(JSON.stringify(global.Env||{})),console.log("### App Framework ### 创建应用 "+t+"---- 框架: "+a.framework+" 版本: "+global.frameworkVersion),Zc[a.framework].createApplication(t,r,n,o))}:"destroyApplication"===e?function(t){var r=Yc[t];if(r&&Zc[r.framework]){var n=Zc[r.framework].destroyApplication(t);return delete Yc[t],n}return new Error("Runtime "+e+':无效应用Id:  "'+t+'"')}:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=t[0],o=Yc[n];return o&&Zc[o.framework]?(a=Zc[o.framework])[e].apply(a,t):new Error("Runtime "+e+':无效应用Id:  "'+n+'"');var a}}function Ir(e){var t,r;"string"==typeof e?t=e:e.length&&e.length>1&&(t=e[0],r=e[1]),"createPage"===t?eu[t]=function(e,r,n,o,a){var i=Yc[r];if(!i)return new Error("Runtime "+t+':无效应用id "'+r+'"');var l=Qc[e];return l?new Error("Runtime "+t+':无效页面id "'+e+'"'):(l={appId:r,created:Date.now()},Qc[e]=l,console.log("### App Framework ### 创建页面 "+e+"----应用Id: "+r),Zc[i.framework].createPage(e,r,n,o,a))}:"processInvokeCallback"===t?(eu[t]=function(e){var r=Zc.XApp;return r?r[t](e):new Error("Runtime "+t+": App 框架没有找到函数定义")},r&&(eu[r]=function(e){var r=Zc.XApp;return r?r[t](e):new Error("Runtime "+t+": App 框架没有找到函数定义")})):(eu[t]=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];var o=r[0],a=Qc[o];if(a){var i=Yc[a.appId];if(i&&Zc[i.framework]){var l=(s=Zc[i.framework])[t].apply(s,r);return"destroyPage"===e&&delete Qc[o],l}return new Error("Runtime "+t+':无效应用Id:  "'+a.appId+'"')}return"backPressPage"===e?(console.error('### App Framework ### backPressPage 无效页面Id:  "'+o+'"'),!1):new Error("Runtime "+t+':无效页面Id:  "'+o+'"');var s},r&&(eu[r]=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var n=e[0],o=Qc[n];if(o){var a=Yc[o.appId];return a&&Zc[a.framework]?(i=Zc[a.framework])[t].apply(i,e):new Error("Runtime "+t+':无效页面Id: "'+n+'"')}var i}))}function Tr(e){Zc=e.frameworks||{};for(var t in Zc){console.log("### App Framework ### 初始化框架 "+t);Zc[t].init(e)}return tu.forEach(xr),ru.forEach(Nr),nu.forEach(Ir),eu}function jr(){Object.freeze(gs),Object.freeze(ms),Object.freeze(ps),Object.freeze(Vc),Object.freeze(qc.prototype),Object.freeze(gs.prototype),Object.freeze(ms.prototype),Object.freeze(ps.prototype),Object.freeze(Vc.prototype),ls.setNativeConsole(),ls.setNativeTimer(),ls.setNativeRouter()}function Pr(e,t){var r=t;if(r&&r.type){var n=Js.nativeComponentMap[r.type];n&&n.methods&&n.methods.forEach(function(t){r[t]=function(){for(var o=[],a=arguments.length;a--;)o[a]=arguments[a];he(e);var i={component:n.type,ref:r.ref,method:t,args:o};global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### invokeComponentMethod---- ",JSON.stringify(i)),ve(e,i)}})}return r}function Rr(e){if(void 0===e)return"function"==typeof this.$rootElement&&this.$rootElement();var t=this._ids[e];return t?Pr(t.vm._page||{},t.element):void 0}function $r(){if(this._rootElement)return Pr(this._page||{},this._rootElement)}function Dr(e){var t=this._ids[e];if(t)return t.vm}function Br(e){var t=this._ids[e];if(t)return t.vm}function Wr(e,t){var r=this._page,n=r.differ;"function"==typeof e&&n.before(function(){e()}),"function"==typeof t&&n.after(function(){t()})}function Mr(){return this._page.app.options}function Jr(e){switch(z(e)){case"undefined":case"null":return"";case"number":case"boolean":case"function":case"regexp":return e.toString();case"date":return e.toISOString();case"string":return e;default:return JSON.stringify(e)}}function zr(e,t,r){function n(e,t){return{type:"text"===e?"span":"text",attr:{value:Jr(t)}}}function o(t,r){t.forEach(function(t){_s(t)?o(t,r):"span"===e||"a"===e?r.attr.value=t:r.children.push(a(t)?t:n(e,t))})}function a(e){return"object"===z(e)&&e.__jsx__}var i={__jsx__:!0,type:e,attr:{},events:{},style:{},classList:[],children:[]};return t&&Object.keys(t).forEach(function(e){var r=t[e];if("style"===e)r.split(";").forEach(function(e){var t,r,n=e.trim().split(":");n.length>2&&(n[1]=n.slice(1).join(":"),n=n.slice(0,2)),2===n.length&&(t=n[0].trim(),r=At(t,n[1].trim()),r.value&&r.value.forEach(function(e){i.style[e.n]=e.v}),r.log&&console.error("### App Parser ###",r.log))});else if("class"===e)i.classList=r.split(/\s+/);else if("id"===e)i.id=r;else if(e.match(/^(on|@)/)){var n=e.replace(/^(on|@)/,"");n&&(i.events[n]=r)}else i.attr[e]=r}),r&&r.length&&r.forEach(function(t){_s(t)?o(t,i):null!=t&&("span"===e||"a"===e?i.attr.value=Jr(t):i.children.push(a(t)?t:n(e,t)))}),i}var Vr={framework:"0.0.6",packager:"0.0.5"};Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},r=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,o=function(e){var t=r(e);return Math.min(Math.max(t,0),n)};return function(e){var r=this,n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var l,s=o(n.length),c=t(r)?Object(new r(s)):new Array(s),u=0;u<s;)l=n[u],c[u]=i?void 0===a?i(l,u):i.call(a,l,u):l,u+=1;return c.length=s,c}}());var qr=e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),Ur=e(function(e){var t=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=t)}),Gr=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Hr=Gr,Zr=function(e){if(!Hr(e))throw TypeError(e+" is not an object!");return e},Kr=function(e){try{return!!e()}catch(e){return!0}},Xr=!Kr(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Yr=Gr,Qr=qr.document,en=Yr(Qr)&&Yr(Qr.createElement),tn=function(e){return en?Qr.createElement(e):{}},rn=!Xr&&!Kr(function(){return 7!=Object.defineProperty(tn("div"),"a",{get:function(){return 7}}).a}),nn=Gr,on=function(e,t){if(!nn(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!nn(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!nn(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!nn(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},an=Zr,ln=rn,sn=on,cn=Object.defineProperty,un=Xr?Object.defineProperty:function(e,t,r){if(an(e),t=sn(t,!0),an(r),ln)try{return cn(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e},pn={f:un},fn=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},dn=pn,hn=fn,vn=Xr?function(e,t,r){return dn.f(e,t,hn(1,r))}:function(e,t,r){return e[t]=r,e},gn={}.hasOwnProperty,mn=function(e,t){return gn.call(e,t)},yn=0,bn=Math.random(),En=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++yn+bn).toString(36))},wn=e(function(e){var t=qr,r=vn,n=mn,o=En("src"),a=Function.toString,i=(""+a).split("toString");Ur.inspectSource=function(e){return a.call(e)},(e.exports=function(e,a,l,s){var c="function"==typeof l;c&&(n(l,"name")||r(l,"name",a)),e[a]!==l&&(c&&(n(l,o)||r(l,o,e[a]?""+e[a]:i.join(String(a)))),e===t?e[a]=l:s?e[a]?e[a]=l:r(e,a,l):(delete e[a],r(e,a,l)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||a.call(this)})}),_n=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},Fn=_n,An=function(e,t,r){if(Fn(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},kn=qr,Sn=Ur,On=vn,Ln=wn,Cn=An,xn=function(e,t,r){var n,o,a,i,l=e&xn.F,s=e&xn.G,c=e&xn.S,u=e&xn.P,p=e&xn.B,f=s?kn:c?kn[t]||(kn[t]={}):(kn[t]||{}).prototype,d=s?Sn:Sn[t]||(Sn[t]={}),h=d.prototype||(d.prototype={});s&&(r=t);for(n in r)o=!l&&f&&void 0!==f[n],a=(o?f:r)[n],i=p&&o?Cn(a,kn):u&&"function"==typeof a?Cn(Function.call,a):a,f&&Ln(f,n,a,e&xn.U),d[n]!=a&&On(d,n,i),u&&h[n]!=a&&(h[n]=a)};kn.core=Sn,xn.F=1,xn.G=2,xn.S=4,xn.P=8,xn.B=16,xn.W=32,xn.U=64,xn.R=128;var Nn=xn,In={}.toString,Tn=function(e){return In.call(e).slice(8,-1)},jn=Tn,Pn=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==jn(e)?e.split(""):Object(e)},Rn=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},$n=Pn,Dn=Rn,Bn=function(e){return $n(Dn(e))},Wn=Math.ceil,Mn=Math.floor,Jn=function(e){return isNaN(e=+e)?0:(e>0?Mn:Wn)(e)},zn=Jn,Vn=Math.min,qn=function(e){return e>0?Vn(zn(e),9007199254740991):0},Un=Jn,Gn=Math.max,Hn=Math.min,Zn=function(e,t){return e=Un(e),e<0?Gn(e+t,0):Hn(e,t)},Kn=Bn,Xn=qn,Yn=Zn,Qn=qr,eo=Qn["__core-js_shared__"]||(Qn["__core-js_shared__"]={}),to=function(e){return eo[e]||(eo[e]={})},ro=to("keys"),no=En,oo=function(e){return ro[e]||(ro[e]=no(e))},ao=mn,io=Bn,lo=function(e){return function(t,r,n){var o,a=Kn(t),i=Xn(a.length),l=Yn(n,i);if(e&&r!=r){for(;i>l;)if((o=a[l++])!=o)return!0}else for(;i>l;l++)if((e||l in a)&&a[l]===r)return e||l||0;return!e&&-1}}(!1),so=oo("IE_PROTO"),co=function(e,t){var r,n=io(e),o=0,a=[];for(r in n)r!=so&&ao(n,r)&&a.push(r);for(;t.length>o;)ao(n,r=t[o++])&&(~lo(a,r)||a.push(r));return a},uo="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),po=co,fo=uo,ho=Object.keys||function(e){return po(e,fo)},vo=Object.getOwnPropertySymbols,go={f:vo},mo={}.propertyIsEnumerable,yo={f:mo},bo=Rn,Eo=function(e){return Object(bo(e))},wo=ho,_o=go,Fo=yo,Ao=Eo,ko=Pn,So=Object.assign,Oo=!So||Kr(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=So({},e)[r]||Object.keys(So({},t)).join("")!=n})?function(e,t){for(var r=arguments,n=Ao(e),o=arguments.length,a=1,i=_o.f,l=Fo.f;o>a;)for(var s,c=ko(r[a++]),u=i?wo(c).concat(i(c)):wo(c),p=u.length,f=0;p>f;)l.call(c,s=u[f++])&&(n[s]=c[s]);return n}:So,Lo=Nn;Lo(Lo.S+Lo.F,"Object",{assign:Oo}),Object.setPrototypeOf||(Object.setPrototypeOf=function(e,t){function r(e,t){return n.call(e,t),e}var n;try{n=e.getOwnPropertyDescriptor(e.prototype,"__proto__").set,n.call({},null)}catch(t){if(e.prototype!=={}.__proto__||void 0==={__proto__:null}.__proto__)return;n=function(e){this.__proto__=e},r.polyfill=r(r({},null),e.prototype)instanceof e}return r}(Object));var Co=e(function(e){var t=to("wks"),r=En,n=qr.Symbol,o="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=o&&n[e]||(o?n:r)("Symbol."+e))}).store=t
}),xo=Tn,No=Co("toStringTag"),Io="Arguments"==xo(function(){return arguments}()),To=function(e,t){try{return e[t]}catch(e){}},jo=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=To(t=Object(e),No))?r:Io?xo(t):"Object"==(n=xo(t))&&"function"==typeof t.callee?"Arguments":n},Po=jo,Ro={};Ro[Co("toStringTag")]="z",Ro+""!="[object z]"&&wn(Object.prototype,"toString",function(){return"[object "+Po(this)+"]"},!0);var $o=Jn,Do=Rn,Bo={},Wo=pn,Mo=Zr,Jo=ho,zo=Xr?Object.defineProperties:function(e,t){Mo(e);for(var r,n=Jo(t),o=n.length,a=0;o>a;)Wo.f(e,r=n[a++],t[r]);return e},Vo=qr.document,qo=Vo&&Vo.documentElement,Uo=Zr,Go=zo,Ho=uo,Zo=oo("IE_PROTO"),Ko=function(){},Xo=function(){var e,t=tn("iframe"),r=Ho.length;for(t.style.display="none",qo.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),Xo=e.F;r--;)delete Xo.prototype[Ho[r]];return Xo()},Yo=Object.create||function(e,t){var r;return null!==e?(Ko.prototype=Uo(e),r=new Ko,Ko.prototype=null,r[Zo]=e):r=Xo(),void 0===t?r:Go(r,t)},Qo=pn.f,ea=mn,ta=Co("toStringTag"),ra=function(e,t,r){e&&!ea(e=r?e:e.prototype,ta)&&Qo(e,ta,{configurable:!0,value:t})},na=Yo,oa=fn,aa=ra,ia={};vn(ia,Co("iterator"),function(){return this});var la=function(e,t,r){e.prototype=na(ia,{next:oa(1,r)}),aa(e,t+" Iterator")},sa=mn,ca=Eo,ua=oo("IE_PROTO"),pa=Object.prototype,fa=Object.getPrototypeOf||function(e){return e=ca(e),sa(e,ua)?e[ua]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?pa:null},da=Nn,ha=wn,va=vn,ga=mn,ma=Bo,ya=la,ba=ra,Ea=fa,wa=Co("iterator"),_a=!([].keys&&"next"in[].keys()),Fa=function(){return this},Aa=function(e,t,r,n,o,a,i){ya(r,t,n);var l,s,c,u=function(e){if(!_a&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},p=t+" Iterator",f="values"==o,d=!1,h=e.prototype,v=h[wa]||h["@@iterator"]||o&&h[o],g=!_a&&v||u(o),m=o?f?u("entries"):g:void 0,y="Array"==t?h.entries||v:v;if(y&&(c=Ea(y.call(new e)))!==Object.prototype&&c.next&&(ba(c,p,!0),ga(c,wa)||va(c,wa,Fa)),f&&v&&"values"!==v.name&&(d=!0,g=function(){return v.call(this)}),(_a||d||!h[wa])&&va(h,wa,g),ma[t]=g,ma[p]=Fa,o)if(l={values:f?g:u("values"),keys:a?g:u("keys"),entries:m},i)for(s in l)s in h||ha(h,s,l[s]);else da(da.P+da.F*(_a||d),t,l);return l},ka=function(e){return function(t,r){var n,o,a=String(Do(t)),i=$o(r),l=a.length;return i<0||i>=l?e?"":void 0:(n=a.charCodeAt(i),n<55296||n>56319||i+1===l||(o=a.charCodeAt(i+1))<56320||o>57343?e?a.charAt(i):n:e?a.slice(i,i+2):o-56320+(n-55296<<10)+65536)}}(!0);Aa(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=ka(t,r),this._i+=e.length,{value:e,done:!1})});var Sa=Gr,Oa=Tn,La=Co("match"),Ca=function(e){var t;return Sa(e)&&(void 0!==(t=e[La])?!!t:"RegExp"==Oa(e))},xa=Ca,Na=Rn,Ia=function(e,t,r){if(xa(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(Na(e))},Ta=Co("match"),ja=Nn,Pa=qn,Ra=Ia,$a="".endsWith;ja(ja.P+ja.F*function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Ta]=!1,!"/./"[e](t)}catch(e){}}return!0}("endsWith"),"String",{endsWith:function(e){var t=Ra(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=Pa(t.length),o=void 0===r?n:Math.min(Pa(r),n),a=String(e);return $a?$a.call(t,a,o):t.slice(o-a.length,o)===a}});var Da=Co("unscopables"),Ba=Array.prototype;void 0==Ba[Da]&&vn(Ba,Da,{});var Wa=function(e){Ba[Da][e]=!0},Ma=function(e,t){return{value:t,done:!!e}},Ja=Wa,za=Ma,Va=Bo,qa=Bn,Ua=Aa(Array,"Array",function(e,t){this._t=qa(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,za(1)):"keys"==t?za(0,r):"values"==t?za(0,e[r]):za(0,[r,e[r]])},"values");Va.Arguments=Va.Array,Ja("keys"),Ja("values"),Ja("entries");for(var Ga=Ua,Ha=ho,Za=wn,Ka=qr,Xa=vn,Ya=Bo,Qa=Co,ei=Qa("iterator"),ti=Qa("toStringTag"),ri=Ya.Array,ni={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},oi=Ha(ni),ai=0;ai<oi.length;ai++){var ii,li=oi[ai],si=ni[li],ci=Ka[li],ui=ci&&ci.prototype;if(ui&&(ui[ei]||Xa(ui,ei,ri),ui[ti]||Xa(ui,ti,li),Ya[li]=ri,si))for(ii in Ga)ui[ii]||Za(ui,ii,Ga[ii],!0)}var pi,fi,di,hi=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},vi=Zr,gi=function(e,t,r,n){try{return n?t(vi(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&vi(o.call(e)),t}},mi=Bo,yi=Co("iterator"),bi=Array.prototype,Ei=function(e){return void 0!==e&&(mi.Array===e||bi[yi]===e)},wi=jo,_i=Co("iterator"),Fi=Bo,Ai=Ur.getIteratorMethod=function(e){if(void 0!=e)return e[_i]||e["@@iterator"]||Fi[wi(e)]},ki=e(function(e){var t=An,r=gi,n=Ei,o=Zr,a=qn,i=Ai,l={},s={},c=e.exports=function(e,c,u,p,f){var d,h,v,g,m=f?function(){return e}:i(e),y=t(u,p,c?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(n(m)){for(d=a(e.length);d>b;b++)if((g=c?y(o(h=e[b])[0],h[1]):y(e[b]))===l||g===s)return g}else for(v=m.call(e);!(h=v.next()).done;)if((g=r(v,y,h.value,c))===l||g===s)return g};c.BREAK=l,c.RETURN=s}),Si=Zr,Oi=_n,Li=Co("species"),Ci=function(e,t){var r,n=Si(e).constructor;return void 0===n||void 0==(r=Si(n)[Li])?t:Oi(r)},xi=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},Ni=An,Ii=xi,Ti=qo,ji=tn,Pi=qr,Ri=Pi.process,$i=Pi.setImmediate,Di=Pi.clearImmediate,Bi=Pi.MessageChannel,Wi=Pi.Dispatch,Mi=0,Ji={},zi=function(){var e=+this;if(Ji.hasOwnProperty(e)){var t=Ji[e];delete Ji[e],t()}},Vi=function(e){zi.call(e.data)};$i&&Di||($i=function(e){for(var t=arguments,r=[],n=1;arguments.length>n;)r.push(t[n++]);return Ji[++Mi]=function(){Ii("function"==typeof e?e:Function(e),r)},pi(Mi),Mi},Di=function(e){delete Ji[e]},"process"==Tn(Ri)?pi=function(e){Ri.nextTick(Ni(zi,e,1))}:Wi&&Wi.now?pi=function(e){Wi.now(Ni(zi,e,1))}:Bi?(fi=new Bi,di=fi.port2,fi.port1.onmessage=Vi,pi=Ni(di.postMessage,di,1)):Pi.addEventListener&&"function"==typeof postMessage&&!Pi.importScripts?(pi=function(e){Pi.postMessage(e+"","*")},Pi.addEventListener("message",Vi,!1)):pi="onreadystatechange"in ji("script")?function(e){Ti.appendChild(ji("script")).onreadystatechange=function(){Ti.removeChild(this),zi.call(e)}}:function(e){setTimeout(Ni(zi,e,1),0)});var qi={set:$i,clear:Di},Ui=qr,Gi=qi.set,Hi=Ui.MutationObserver||Ui.WebKitMutationObserver,Zi=Ui.process,Ki=Ui.Promise,Xi="process"==Tn(Zi),Yi=_n,Qi=function(e){return new t(e)},el={f:Qi},tl=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},rl=Zr,nl=Gr,ol=el,al=function(e,t){if(rl(e),nl(t)&&t.constructor===e)return t;var r=ol.f(e);return(0,r.resolve)(t),r.promise},il=wn,ll=qr,sl=pn,cl=Xr,ul=Co("species"),pl=Co("iterator"),fl=!1;try{var dl=[7][pl]();dl.return=function(){fl=!0},Array.from(dl,function(){throw 2})}catch(e){}var hl,vl,gl,ml,yl=qr,bl=An,El=jo,wl=Nn,_l=Gr,Fl=_n,Al=hi,kl=ki,Sl=Ci,Ol=qi.set,Ll=function(){var e,t,r,n=function(){var n,o;for(Xi&&(n=Zi.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(Xi)r=function(){Zi.nextTick(n)};else if(!Hi||Ui.navigator&&Ui.navigator.standalone)if(Ki&&Ki.resolve){var o=Ki.resolve();r=function(){o.then(n)}}else r=function(){Gi.call(Ui,n)};else{var a=!0,i=document.createTextNode("");new Hi(n).observe(i,{characterData:!0}),r=function(){i.data=a=!a}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}(),Cl=el,xl=tl,Nl=al,Il=yl.TypeError,Tl=yl.process,jl=yl.Promise,Pl="process"==El(Tl),Rl=function(){},$l=vl=Cl.f,Dl=!!function(){try{var e=jl.resolve(1),t=(e.constructor={})[Co("species")]=function(e){e(Rl,Rl)};return(Pl||"function"==typeof PromiseRejectionEvent)&&e.then(Rl)instanceof t}catch(e){}}(),Bl=function(e){var t;return!(!_l(e)||"function"!=typeof(t=e.then))&&t},Wl=function(e,t){if(!e._n){e._n=!0;var r=e._c;Ll(function(){for(var n=e._v,o=1==e._s,a=0;r.length>a;)!function(t){var r,a,i=o?t.ok:t.fail,l=t.resolve,s=t.reject,c=t.domain;try{i?(o||(2==e._h&&zl(e),e._h=1),!0===i?r=n:(c&&c.enter(),r=i(n),c&&c.exit()),r===t.promise?s(Il("Promise-chain cycle")):(a=Bl(r))?a.call(r,l,s):l(r)):s(n)}catch(e){s(e)}}(r[a++]);e._c=[],e._n=!1,t&&!e._h&&Ml(e)})}},Ml=function(e){Ol.call(yl,function(){var t,r,n,o=e._v,a=Jl(e);if(a&&(t=xl(function(){Pl?Tl.emit("unhandledRejection",o,e):(r=yl.onunhandledrejection)?r({promise:e,reason:o}):(n=yl.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=Pl||Jl(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},Jl=function(e){return 1!==e._h&&0===(e._a||e._c).length},zl=function(e){Ol.call(yl,function(){var t;Pl?Tl.emit("rejectionHandled",e):(t=yl.onrejectionhandled)&&t({promise:e,reason:e._v})})},Vl=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),Wl(t,!0))},ql=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw Il("Promise can't be resolved itself");(t=Bl(e))?Ll(function(){var n={_w:r,_d:!1};try{t.call(e,bl(ql,n,1),bl(Vl,n,1))}catch(e){Vl.call(n,e)}}):(r._v=e,r._s=1,Wl(r,!1))}catch(e){Vl.call({_w:r,_d:!1},e)}}};Dl||(jl=function(e){Al(this,jl,"Promise","_h"),Fl(e),hl.call(this);try{e(bl(ql,this,1),bl(Vl,this,1))}catch(e){Vl.call(this,e)}},hl=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},hl.prototype=function(e,t,r){for(var n in t)il(e,n,t[n],r);return e}(jl.prototype,{then:function(e,t){var r=$l(Sl(this,jl));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Pl?Tl.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Wl(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),gl=function(){var e=new hl;this.promise=e,this.resolve=bl(ql,e,1),this.reject=bl(Vl,e,1)},Cl.f=$l=function(e){return e===jl||e===ml?new gl(e):vl(e)}),wl(wl.G+wl.W+wl.F*!Dl,{Promise:jl}),ra(jl,"Promise"),function(e){var t=ll[e];cl&&t&&!t[ul]&&sl.f(t,ul,{configurable:!0,get:function(){return this}})}("Promise"),ml=Ur.Promise,wl(wl.S+wl.F*!Dl,"Promise",{reject:function(e){var t=$l(this);return(0,t.reject)(e),t.promise}}),wl(wl.S+wl.F*!Dl,"Promise",{resolve:function(e){return Nl(this,e)}}),wl(wl.S+wl.F*!(Dl&&function(e,t){if(!t&&!fl)return!1;var r=!1;try{var n=[7],o=n[pl]();o.next=function(){return{done:r=!0}},n[pl]=function(){return o},e(n)}catch(e){}return r}(function(e){jl.all(e).catch(Rl)})),"Promise",{all:function(e){var t=this,r=$l(t),n=r.resolve,o=r.reject,a=xl(function(){var r=[],a=0,i=1;kl(e,!1,function(e){var l=a++,s=!1;r.push(void 0),i++,t.resolve(e).then(function(e){s||(s=!0,r[l]=e,--i||n(r))},o)}),--i||n(r)});return a.e&&o(a.v),r.promise},race:function(e){var t=this,r=$l(t),n=r.reject,o=xl(function(){kl(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}});var Ul=global.console,Gl=["off","error","warn","info","log","debug","trace"],Hl={},Zl={setNativeConsole:o,resetNativeConsole:a},Kl=global.history,Xl={setNativeRouter:i,resetNativeRouter:l};global.Env&&"ios"===global.Env.platform&&(global.Promise=void 0);var Yl=global.setTimeout,Ql=global.setInterval,es=global.requestAnimationFrame;global.setTimeoutNative=function(e,t,r){Yl(function(){global.setTimeoutCallback(t)},r)},global.setIntervalNative=function(e,t,r){Ql(function(){global.setIntervalCallback(t)},r)},global.requestAnimationFrameNative=function(e,t,r){es(function(){global.requestAnimationFrameCallback(t)},r)};var ts=global.clearTimeout,rs=global.setTimeoutNative,ns=global.clearInterval,os=global.setIntervalNative,as=global.cancelAnimationFrame,is=global.requestAnimationFrameNative,ls={setNativeConsole:Zl.setNativeConsole,resetNativeConsole:Zl.resetNativeConsole,setNativeTimer:s,resetNativeTimer:c,setNativeRouter:Xl.setNativeRouter,resetNativeRouter:Xl.resetNativeRouter,freezePrototype:u},ss={},cs=1,us=function e(){this.nodeType=e.nodeType.Unknown,this.ref=w(),this.children=[],this.layoutChildren=[],this.parentNode=null,this.nextSibling=null,this.previousSibling=null};us.prototype.renderParent=function(){for(var e=this.parentNode;e&&!e.supportRender();)e=e.parentNode;return e},us.prototype.renderRef=function(){var e=[];return this.nodeType===us.nodeType.Fragment?this.layoutChildren.forEach(function(t){e=e.concat(t.renderRef())}):e.push(this.ref),e},us.prototype.renderCount=function(){var e=this.supportRender()?1:0;return this.nodeType===us.nodeType.Fragment&&this.layoutChildren.forEach(function(t){e+=t.renderCount()}),e},us.prototype.renderIndex=function(){var e=this.parentNode;if(!e||!this.supportLayout())return"document"===this.type?0:-1;var t=e.renderChildIndex(this),r=0;return e.supportRender()||(r=e.renderIndex()),t<0||r<0?-1:t+r},us.prototype.renderChildIndex=function(e){var t=this;if(!this.layoutChildren||this.layoutChildren.length<=0)return-1;var r=this.layoutChildren.indexOf(e);if(r>0){var n=0+r;r=0;for(var o=0;o<n;o++)r+=t.layoutChildren[o].renderCount()}return r},us.prototype.destroy=function(){var e=f(this.docId);e&&(delete this.docId,delete e.nodeMap[this.ref]),this.children.forEach(function(e){e.destroy()})},us.prototype.supportRender=function(){return this.nodeType>us.nodeType.Unknown&&this.nodeType<us.nodeType.Fragment},us.prototype.supportLayout=function(){return this.nodeType>us.nodeType.Unknown&&this.nodeType<us.nodeType.Comment},us.prototype.nextLayoutElement=function(){for(var e=this.nextSibling;e;){if(e.supportLayout())return e;e=e.nextSibling}},us.prototype.prevLayoutElement=function(){for(var e=this.previousSibling;e;){if(e.supportLayout())return e;e=e.previousSibling}},us.prototype.layoutElementIndex=function(){for(var e=this.previousSibling,t=0;e;)e.supportLayout()&&(t+=1),e=e.previousSibling;return t},us.documentId="-1",us.rootId="-2",us.nodeType={Unknown:0,Document:1,Element:2,Fragment:512,Comment:1024};var ps=function(e){function t(t){e.call(this),this.nodeType=e.nodeType.Comment,this.type="comment",this.value=t,this.children=[],this.layoutChildren=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return"\x3c!-- "+this.value+" --\x3e"},t}(us),fs={ID:1e6,CLASS:1e3,TAG:1,GAP:1e3},ds={name:null,order:0,score:0,style:null},hs=[{newN:"t",oldN:"type",newV:["d","a","t","u","p","pe"],oldV:["descendant","attribute","tag","universal","pseudo","pseudo-element"]},{newN:"n",oldN:"name"},{newN:"i",oldN:"ignoreCase"},{newN:"a",oldN:"action"},{newN:"v",oldN:"value"}],vs="div",gs=function(e){function t(t,r){void 0===t&&(t=vs),e.call(this),r=r||{},this.nodeType=e.nodeType.Element,this.type=t,this.attr=r.attr||{},this.style=r.style||{},this.classStyle=r.classStyle||{},this.tagStyle=r.tagStyle||{},this.idStyle=r.idStyle||{},this.compoundStyle=r.compoundStyle||{},this.usedPropertyMap={},this.event={},this.children=[],this.layoutChildren=[],this.id=null,this.classList=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.appendChild=function(t,r){if(!t.parentNode||t.parentNode===this)if(t.parentNode){if(E(t,this.children,this.children.length,!0),t.supportLayout()){var n=E(t,this.layoutChildren,this.layoutChildren.length),o=h(this.docId);if(o&&n>=0){var a=t.renderIndex();return o.moveNode(t,this,a)}}}else if(g(t,this),y(t,this.children,this.children.length,!0),this.docId&&v(this.docId,t),r&&r(),t.supportLayout()){y(t,this.layoutChildren,this.layoutChildren.length);var i=h(this.docId);if(i){var l=-1;return this.nodeType===e.nodeType.Fragment&&(l=t.renderIndex()),i.addNode(t,this,l)}}},t.prototype.moveChild=function(e,t){if(e.parentNode&&e.parentNode===this&&(this.layoutChildren.push(e),e.supportLayout())){var r=h(this.docId);if(r&&t>=0){var n=e.renderIndex();return r.moveNode(e,this,n)}}},t.prototype.insertBefore=function(e,t){if(!e||!t)return void console.error("### App Runtime ### insertBefore函数的node/before参数无效");if(!(e.parentNode&&e.parentNode!==this||e===t||e.nextSibling&&e.nextSibling===t))if(e.parentNode){if(E(e,this.children,this.children.indexOf(t),!0),e.supportLayout()){var r=E(e,this.layoutChildren,e.layoutElementIndex()),n=h(this.docId);if(n&&r>=0){var o=e.renderIndex();return n.moveNode(e,this,o)}}}else if(g(e,this),y(e,this.children,this.children.indexOf(t),!0),this.docId&&v(this.docId,e),e.supportLayout()){var a=t.supportLayout()?t:t.nextLayoutElement(),i=y(e,this.layoutChildren,a?this.layoutChildren.indexOf(a):this.layoutChildren.length),l=h(this.docId);if(l&&i>=0){var s=e.renderIndex();return l.addNode(e,this,s)}}},t.prototype.insertAfter=function(e,t){if(!e||!t)return void console.error("### App Runtime ### insertBefore函数的node/before参数无效");if(!(e.parentNode&&e.parentNode!==this||e===t||e.previousSibling&&e.previousSibling===t))if(e.parentNode){if(E(e,this.children,this.children.indexOf(t)+1,!0),e.supportLayout()){var r=E(e,this.layoutChildren,e.layoutElementIndex()),n=h(this.docId);if(n&&r>=0){var o=e.renderIndex();return n.moveNode(e,this,o)}}}else if(g(e,this),y(e,this.children,this.children.indexOf(t)+1,!0),this.docId&&v(this.docId,e),e.supportLayout()){var a=t.supportLayout()?t:t.prevLayoutElement(),i=y(e,this.layoutChildren,this.layoutChildren.indexOf(a)+1),l=h(this.docId);if(l&&i>=0){var s=e.renderIndex();return l.addNode(e,this,s)}}},t.prototype.setAttr=function(e,t,r){if(this.attr[e]!==t||!1===r){this.attr[e]=t;var n=h(this.docId);!r&&n&&n.setAttr(this.ref,e,t)}},t.prototype.setId=function(e,t){this.id===e&&!1!==t||(this.id=e)},t.prototype.setClassList=function(e,t){this.classList===e&&!1!==t||(this.classList=e)},t.prototype.setStyle=function(e,t,r){if(this.style[e]!==t||!1===r){this.style[e]=t;var n=h(this.docId);!r&&n&&n.setStyle(this.ref,e,t)}},t.prototype.setStyles=function(e,t){if(this.style!==e||!1===t){this.style=e;var r=h(this.docId);!t&&r&&r.setStyles(this.ref,e)}},t.prototype.setClassStyle=function(e){this.classStyle=e;var t=h(this.docId);t&&t.setStyles(this.ref,this.toStyle())},t.prototype.setIdStyle=function(e){this.idStyle=e;var t=h(this.docId);t&&t.setStyles(this.ref,this.toStyle())},t.prototype.setTagStyle=function(e){this.tagStyle=e;var t=h(this.docId);t&&t.setStyles(this.ref,this.toStyle())},t.prototype.setCompoundStyle=function(e){this.compoundStyle=e},t.prototype.addEvent=function(e,t){if(!this.event[e]){this.event[e]=t;var r=h(this.docId);r&&r.addEvent(this.ref,e)}},t.prototype.removeEvent=function(e){if(this.event[e]){delete this.event[e];var t=h(this.docId);t&&t.removeEvent(this.ref,e)}},t.prototype.fireEvent=function(e,t){var r=this.event[e];if(r)return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Element "+this.ref+" 执行 fireEvent("+e+")---- "),r.call(this,t)},t.prototype.toStyle=function(){var e=Object.keys(this.tagStyle).length>0&&_({name:this.type,style:this.tagStyle}),t=this.id&&F({name:"#"+this.id,style:this.idStyle}),r=L(this.usedPropertyMap,this.style,t,this.classStyle,e,this.compoundStyle);return global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Element "+this.ref+" 执行 toStyle()---- ",JSON.stringify(r)),r},t.prototype.toJSON=function(t){var r=this;void 0===t&&(t=!1);var n={};this.attr&&Object.keys(this.attr).forEach(function(e){var t=r.attr[e];n[e]=null==t?"":t});var o={ref:this.ref.toString(),type:this.type,attr:n,style:this.toStyle()},a=Object.keys(this.event);return a.length&&(o.event=a),this.layoutChildren.length&&(o.children=[],this.layoutChildren.forEach(function(r){var n=r.toJSON(t);r.nodeType===e.nodeType.Fragment?n&&n.length&&(o.children=o.children.concat(n)):o.children.push(n)})),o},t.prototype.toString=function(){return"<"+this.type+" attr="+JSON.stringify(this.attr)+" style="+JSON.stringify(this.toStyle())+">"+this.layoutChildren.map(function(e){return e.toString()}).join("")+"</"+this.type+">"},t.prototype.removeChild=function(t,r){if(t.nodeType===e.nodeType.Fragment){if(t.parentNode){r||(b(t,this.children,!0),b(t,this.layoutChildren));var n=h(this.docId);n&&n.removeNode(t)}t.clear(!1),r||t.destroy()}else{if(t.parentNode&&(b(t,this.children,!0),t.supportLayout())){b(t,this.layoutChildren);var o=h(this.docId);o&&o.removeNode(t)}t.destroy()}},t.prototype.clear=function(){var e=h(this.docId);e&&this.layoutChildren.forEach(function(t){e.removeNode(t)}),this.children.forEach(function(e){e.destroy()}),this.children.length=0,this.layoutChildren.length=0},t}(us),ms=function(e){function t(){e.call(this),this.nodeType=e.nodeType.Fragment,this.type="fragment",this.children=[],this.layoutChildren=[],this.display=!0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.appendChild=function(e,t){if(!e.parentNode||e.parentNode===this){var r=this.renderParent();if(e.parentNode){if(E(e,this.children,this.children.length,!0),e.supportLayout()){var n=E(e,this.layoutChildren,this.layoutChildren.length),o=h(this.docId);if(o&&n>=0){var a=e.renderIndex();return o.moveNode(e,r,a)}}}else if(g(e,this),y(e,this.children,this.children.length,!0),this.docId&&v(this.docId,e),t&&t(),e.supportLayout()){y(e,this.layoutChildren,this.layoutChildren.length);var i=h(this.docId);if(i){var l=e.renderIndex();return i.addNode(e,r,l)}}}},t.prototype.moveChild=function(e,t){if(e.parentNode&&e.parentNode===this){var r=this.renderParent();if(this.layoutChildren.push(e),e.supportLayout()){var n=h(this.docId),o=e.renderIndex();if(n&&t>=0&&t!==o)return n.moveNode(e,r,o)}}},t.prototype.insertBefore=function(e,t){if(!e||!t)return void console.error("### App Runtime ### insertBefore函数的node/before参数无效");if(!(e.parentNode&&e.parentNode!==this||e===t||e.nextSibling&&e.nextSibling===t)){var r=this.renderParent();if(e.parentNode){if(E(e,this.children,this.children.indexOf(t),!0),e.supportLayout()){var n=E(e,this.layoutChildren,e.layoutElementIndex()),o=h(this.docId);if(o&&n>=0){var a=e.renderIndex();return o.moveNode(e,r,a)}}}else if(g(e,this),y(e,this.children,this.children.indexOf(t),!0),this.docId&&v(this.docId,e),e.supportLayout()){var i=t.supportLayout()?t:t.nextLayoutElement(),l=y(e,this.layoutChildren,i?this.layoutChildren.indexOf(i):this.layoutChildren.length),s=h(this.docId);if(s&&l>=0){var c=e.renderIndex();return s.addNode(e,r,c)}}}},t.prototype.insertAfter=function(e,t){if(!e||!t)return void console.error("### App Runtime ### insertBefore函数的node/before参数无效");if(!(e.parentNode&&e.parentNode!==this||e===t||e.previousSibling&&e.previousSibling===t)){var r=this.renderParent();if(e.parentNode){if(E(e,this.children,this.children.indexOf(t)+1,!0),e.supportLayout()){var n=E(e,this.layoutChildren,e.layoutElementIndex()),o=h(this.docId);if(o&&n>=0){var a=e.renderIndex();return o.moveNode(e,r,a)}}}else if(g(e,this),y(e,this.children,this.children.indexOf(t)+1,!0),this.docId&&v(this.docId,e),e.supportLayout()){var i=t.supportLayout()?t:t.prevLayoutElement(),l=y(e,this.layoutChildren,this.layoutChildren.indexOf(i)+1),s=h(this.docId);if(s&&l>=0){var c=e.renderIndex();return s.addNode(e,r,c)}}}},t.prototype.removeChild=function(t,r){if(t.nodeType===e.nodeType.Fragment){if(t.parentNode){r||(b(t,this.children,!0),b(t,this.layoutChildren));var n=h(this.docId);n&&n.removeNode(t)}t.clear(!1),r||t.destroy()}else{if(t.parentNode&&(b(t,this.children,!0),t.supportLayout())){b(t,this.layoutChildren);var o=h(this.docId);o&&o.removeNode(t)}t.destroy()}},t.prototype.clear=function(e){if(void 0===e&&(e=!0),e){var t=h(this.docId);t&&this.layoutChildren.forEach(function(e){t.removeNode(e)})}this.children.forEach(function(e){e.destroy()}),this.children.length=0,this.layoutChildren.length=0},t.prototype.toJSON=function(t){void 0===t&&(t=!1);var r=[],n=[];if(t){var o={ref:this.ref.toString(),type:this.type,children:[]};r.push(o)}return this.layoutChildren.length&&this.layoutChildren.forEach(function(r){var o=r.toJSON(t);r.nodeType===e.nodeType.Fragment?o&&o.length&&(n=n.concat(o)):n.push(o)}),t?r[0].children=n:r=n,r},t.prototype.toString=function(){var e="";return this.children.length&&(e=this.children.map(function(e){return e.toString()}).join("")),e},t}(us),ys=function e(t,r){if(r instanceof e)return r;this.timestamp=Date.now(),this.detail=r,this.type=t;var n=!1;this.stop=function(){n=!0},this.hasStopped=function(){return n}},bs=["onCreate","onInit","onReady","onShow","onHide","onDestroy","onBackPress","onMenuPress","onUpdateData","onOrientationChange"];ys.reserveEvents=bs,ys.isReservedEvent=function(e){return bs.indexOf(e)>=0};var Es,ws=Object.prototype.hasOwnProperty,_s=Array.isArray||function(e){return e instanceof Array},Fs=["$idx","$item","$evt"],As=Object.prototype.toString,ks="[object Object]",Ss="__proto__"in{};"undefined"!=typeof Set&&Set.toString().match(/native code/)?Es=Set:(Es=function(){this.set=Object.create(null)},Es.prototype.has=function(e){return void 0!==this.set[e]},Es.prototype.add=function(e){null==e||this.set[e]||(this.set[e]=1)},Es.prototype.clear=function(){this.set=Object.create(null)});var Os=/-(\w)/g,Ls=function(e){var t=Object.create(null);return function(r){return t[r]||(t[r]=e(r))}}(function(e){return e.replace(Os,J)}),Cs=Array.prototype,xs=Object.create(Cs);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=Cs[e];N(xs,e,function(){for(var r=arguments,n=arguments.length,o=new Array(n);n--;)o[n]=r[n];var a,i=t.apply(this,o),l=this.__ob__;switch(e){case"push":case"unshift":a=o;break;case"splice":a=o.slice(2)}return a&&l.observeArray(a),l.dep.notify(),i})}),N(Cs,"$set",function(e,t){return e>=this.length&&(this.length=e+1),this.splice(e,1,t)[0]}),N(Cs,"$remove",function(e){this.length&&("number"!=typeof e&&(e=this.indexOf(e)),e>-1&&this.splice(e,1))});var Ns=/^@(app)-application\//,Is=/^@(app)-component\//,Ts=/^@(app)-module\//,js=function(e){return!!e.match(Ns)},Ps=function(e){return!!e.match(Is)},Rs=["manifest","config","router","data","props","style","template"],$s=["if","for","show","tid"],Ds=0,Bs=function(e,t){this.id=e,this.options=t||{},this.name="",this.entry="",this.customComponentMap={},this.designWidth=750,this._def=null,this._data={},this._events={},this.callbacks={},this._status=null},Ws={$data:{},$def:{},$status:{},$valid:{}};Bs.prototype.$clear=function(){this.options={},this.name="",this.customComponentMap={},this.designWidth=750,this._def=null,this._data={},this._events={}},Ws.$data.get=function(){return D(this._data)||(this._data={}),this._data},Ws.$data.set=function(e){var t=this,r="function"==typeof e?e():e;r?(this._data=this._data||{},Object.keys(r).forEach(function(e){W(e)?console.error("### App Framework ### 页面数据属性名 '"+e+"' 非法, 属性名不能以$或_开头"):(e in t._data&&console.warn("### App Framework ### App 全局数据 ("+e+") 被覆盖"),t._data[e]=r[e])})):(this._data={},console.warn("### App Framework ### App 全局数据被清空"))},Ws.$def.get=function(){return this._def},Ws.$def.set=function(e){var t=this;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### App 元数据初始化----"),this._def=e;var r=e.manifest;if(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### App 元数据manifest----",JSON.stringify(r)),r){this.name=r.name;var n=r.config;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### App 元数据config----",JSON.stringify(n)),n&&(this.$data=n.data,this.designWidth=n.designWidth||750,this.designWidth<320&&(this.designWidth=320));var o=r.router;global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### App 元数据router----",JSON.stringify(o)),o&&(this.entry=o.entry||"")}for(var a in e){"function"!=typeof e[a]||ys.isReservedEvent(a)||(t[a]=e[a])}this.$on("applc:onCreate",function(e){this._status=e.type.toLowerCase().replace(/.*:on/,"")}),this.$on("applc:onDestroy",function(e){this._status=e.type.toLowerCase().replace(/.*:on/,"")}),ys.reserveEvents.forEach(function(r){t.$on("applc:"+r,e[r])}),this._defined=!0},Ws.$status.get=function(){return this._status},Ws.$valid.get=function(){return"create"===this._status},Bs.prototype.$emit=function(e,t){var r=this,n=this._events,o=n[e];if(o)for(var a=0;a<o.length;a++){var i=new ys(e,t);o[a].call(r,i)}},Bs.prototype.$on=function(e,t){if(e&&"function"==typeof t){var r=this._events;r[e]=r[e]||[],r[e].push(t)}},Bs.prototype.$off=function(e){if(e){delete this._events[e]}},Object.defineProperties(Bs.prototype,Ws),Object.freeze(Bs),Object.freeze(Bs.prototype);var Ms={},Js={nativeComponentMap:Ms},zs={},Vs={MODE:{SYNC:0,CALLBACK:1,SUBSCRIBE:2},TYPE:{METHOD:0,ATTRIBUTE:1,EVENT:2}},qs=["success","cancel","fail","complete"],Us={},Gs=function(e,t){this.id=e,this.map=[],this.pre=[],this.post=[],this.page=t};Gs.prototype.isEmpty=function(){return 0===this.map.length},Gs.prototype.append=function(e,t,r,n){var o=this;this.flushTimer||(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.append 设置SetTimeout"),this.flushTimer=global.setTimeoutWrap(-1,function(){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.append 执行SetTimeout"),o.flushTimer=0,o.flush(),o.notify()},0));var a=this.map;t in a||(a[t]={});var i=a[t];e in i||(i[e]={});var l=i[e];"element"===e?(r in l||(l[r]=[]),l[r].push(n)):l[r]=n,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.append 完成")},Gs.prototype.flush=function(){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.flush 开始----");var e=this.pre.slice();this.pre.length=0,e.forEach(function(e){e()});var t=this.map.slice();this.map.length=0,t.forEach(function(e){me(e,"for"),me(e,"if"),me(e,"html"),me(e,"render"),ye(e,"element")});var r=this.post.slice();this.post.length=0,r.forEach(function(e){e()}),this.isEmpty()||this.flush(),this.flushTimer&&(global.clearTimeoutWrap(this.flushTimer),this.flushTimer=0),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Listener.flush 结束----")},Gs.prototype.notify=function(){if(this.page&&this.page.doc){he(this.page)&&this.page.doc.listener.updateFinish()}},Gs.prototype.before=function(e){this.pre.push(e)},Gs.prototype.after=function(e){this.post.push(e)};var Hs=function(e,t,r){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 创建页面("+e+")---- ",JSON.stringify(r)),this.id=e,this.app=t,this.name=null,this.vm=null,this.intent=r,this.doc=new Js.DomDocument(e,this.app.options.bundleUrl,null),this.doc.designWidth=this.app.designWidth,this.differ=new Gs(e,this),this.callbacks={}};Object.freeze(Hs),Object.freeze(Hs.prototype);var Zs=0,Ks=[],Xs=function(){this.id=Zs++,this.subs=[]};Xs.prototype.addSub=function(e){this.subs.push(e)},Xs.prototype.removeSub=function(e){I(this.subs,e)},Xs.prototype.depend=function(){Xs.target&&Xs.target.addLink(this)},Xs.prototype.notify=function(){for(var e=this.subs.slice(),t=0,r=e.length;t<r;t++)e[t].update()},Xs.target=null,Xs.pushTarget=function(e){Xs.target&&Ks.push(Xs.target),Xs.target=e},Xs.popTarget=function(){Xs.target=Ks.pop()},Xs.resetTarget=function(){Xs.target=null,Ks=[]};var Ys=Object.getOwnPropertyNames(xs),Qs=function(e){if(this.value=e,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 创建 XObserver----目标:",JSON.stringify(e)),this.dep=new Xs,N(e,"__ob__",this),Array.isArray(e)){(Ss?be:Ee)(e,xs,Ys),this.observeArray(e)}else this.walk(e)};Qs.prototype.walk=function(e){var t=this;for(var r in e)t.convert(r,e[r])},
Qs.prototype.observeArray=function(e){for(var t=0,r=e.length;t<r;t++)Qs.$ob(e[t])},Qs.prototype.convert=function(e,t){we(this.value,e,t)},Qs.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},Qs.prototype.removeVm=function(e){I(this.vms,e)},Qs.$ob=function(e,t){if(D(e)){var r;return T(e,"__ob__")&&e.__ob__ instanceof Qs?r=e.__ob__:(Array.isArray(e)||B(e))&&Object.isExtensible(e)&&(r=new Qs(e)),r&&t&&r.addVm(t),r}};var ec=0,tc=function(e,t,r,n){n&&x(this,n),this.vm=e,e._watchers.push(this),this.expression=t,this.cb=r,this.id=ec++,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 创建 XWatcher "+this.id+" "+this.expression.toString()),this.active=!0,this.links=[],this.linkIds=M(),this.newLinks=[],this.newLinkIds=M(),"function"==typeof t&&(this.getter=t),this.value=this.get()};tc.prototype.get=function(){Xs.pushTarget(this);var e=this.getter.call(this.vm,this.vm);return Xs.popTarget(),this.clearLink(),e},tc.prototype.addLink=function(e){var t=e.id;this.newLinkIds.has(t)||(this.newLinkIds.add(t),this.newLinks.push(e),this.linkIds.has(t)||e.addSub(this))},tc.prototype.clearLink=function(){for(var e=this,t=this.links.length;t--;){var r=e.links[t];e.newLinkIds.has(r.id)||r.removeSub(e)}var n=this.linkIds;this.linkIds=this.newLinkIds,this.newLinkIds=n,this.newLinkIds.clear(),n=this.links,this.links=this.newLinks,this.newLinks=n,this.newLinks.length=0},tc.prototype.update=function(){if(this.active){var e=this.get();if(e!==this.value||D(e)){var t=this.value;this.value=e,this.cb.call(this.vm,e,t)}}},tc.prototype.depend=function(){for(var e=this,t=this.links.length;t--;)e.links[t].depend()},tc.prototype.close=function(){var e=this;if(this.active){I(this.vm._watchers,this);for(var t=this.links.length;t--;)e.links[t].removeSub(e);this.active=!1,this.vm=this.cb=this.value=null}};var rc=Js.nativeComponentMap,nc={attr:"setAttr",style:"setStyle",styles:"setStyles",event:"addEvent"},oc=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,ac=/^<\/([-A-Za-z0-9_]+)[^>]*>/,ic=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,lc=vt("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),sc=vt("br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),cc=vt("abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),uc=vt("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),pc=vt("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),fc=vt("script,style,block"),dc=["NOTE","WARNING","ERROR"],hc={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},vc=["px","%"],gc=/^[-+]?[0-9]*\.?[0-9]+(.*)$/,mc=/^#[0-9a-fA-F]{6}$/,yc=/^#[0-9a-fA-F]{3}$/,bc=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/,Ec=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*\.?\d+)\s*\)$/,wc=/^[-+]?[0-9]+$/,_c=/^url\(\s*['"]?\s*([^()]+?)\s*['"]?\s*\)$/,Fc=/^[a-zA-Z_][a-zA-Z0-9]*$/,Ac=/^[-+]?[0-9]*\.?[0-9]+$/,kc={length:function(e,t){e=(e||"").toString();var r=e.match(gc);if(t||(t=vc),r){var n=r[1];return n?t.indexOf(n.toLowerCase())>=0?{value:e}:{value:parseFloat(e)+t[0],reason:function(e,r,o){return"ERROR: 属性 `"+mt(e)+"` 不支持单位 `"+n+"`, 目前仅支持 `"+JSON.stringify(t)+"`"}}:{value:parseFloat(e)+t[0],reason:function(e,r,n){return"WARNING: 属性 `"+mt(e)+"` 没有指定单位，默认为 `"+t[0]+"`"}}}return{value:null,reason:function(e,t,r){return"ERROR: 属性 `"+mt(e)+"` 的值 `"+t+"` 不正确(仅支持数值)"}}},color:function(e){if(e=(e||"").toString(),e.match(mc))return{value:e};if(e.match(yc))return{value:"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3],reason:function(e,t,r){return"NOTE: 颜色值 `"+t+"` 转换为 `"+r+"`"}};if(hc[e])return{value:hc[e],reason:function(e,t,r){return"NOTE: 颜色值 `"+t+"` 转换为 `"+r+"`"}};var t,r,n,o,a;return(t=bc.exec(e))&&(r=parseInt(t[1]),n=parseInt(t[2]),o=parseInt(t[3]),r>=0&&r<=255&&n>=0&&n<=255&&o>=0&&o<=255)?{value:"rgb("+[r,n,o].join(",")+")"}:(t=Ec.exec(e),t&&(r=parseInt(t[1]),n=parseInt(t[2]),o=parseInt(t[3]),a=parseFloat(t[4]),r>=0&&r<=255&&n>=0&&n<=255&&o>=0&&o<=255&&a>=0&&a<=1)?{value:"rgba("+[r,n,o,a].join(",")+")"}:"transparent"===e?{value:"rgba(0,0,0,0)"}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+mt(e)+"` 的颜色值 `"+t+"` 无效`"}})},number:function(e){e=(e||"").toString();var t=e.match(Ac);return t&&!t[1]?{value:parseFloat(e)}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+mt(e)+"` 的值 `"+t+"` 无效 ` (仅支持数值)"}}},integer:function(e){return e=(e||"").toString(),e.match(wc)?{value:parseInt(e,10)}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+mt(e)+"` 的值 `"+t+"` 无效 ` (仅支持整数)"}}},url:function(e){if(e=(e||"").toString().trim(),e.match(/^none$/i))return{value:"none"};var t=_c.exec(e);return t?{value:t[1]}:{value:null,reason:function(e,t,r){return"WARNING: 属性`"+mt(e)+"` 的值 `"+t+"` 必须是 none 或者 url(...)"}}},name:function(e){return e=(e||"").toString(),e.match(Fc)?{value:e}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+mt(e)+"` 的值 `"+t+"` 格式不正确"}}},enum:function(e,t){var r=e.indexOf(t);return r>0?{value:t}:0===r?{value:t,reason:function(e,t,r){return"NOTE:  属性`"+mt(e)+"` 的值 `"+t+"` 是缺省值(可以忽略不写)"}}:{value:null,reason:function(t,r,n){return"ERROR: 属性`"+mt(t)+"` 的值 `"+r+"` 无效 ` (有效枚举值为: `"+e.join("`|`")+"`)"}}},arraylength:function(e,t,r){t=(t||"").toString();var n=t.split(/\s+/);if(n&&n.length<=4){var o,a=[],i=[],l=0;return n.forEach(function(e,t){if(o=kc.length(e,r),bt(o.value)&&a.push(o.value),o.reason){var n=o.reason(t.toString(),e,o.value),s=n.match(/^([A-Z]+):/);if(s){var c=dc.indexOf(s[1]);l<dc.indexOf(s[1])&&(l=c),n=n.replace(s[0],"").trim()}i.push(n)}}),{value:l<2?yt(e,a):null,reason:i.length>0?function(e,t,r){return dc[l]+": 属性`"+mt(e)+"` 的值 `"+t+"` 存在问题: \n  "+i.join("\n  ")}:null}}return{value:null,reason:function(e,t,r){return"ERROR: 属性`"+mt(e)+"` 的值 `"+t+"` 格式不正确"}}},arraycolor:function(e,t){t=(t||"").toString();var r=t.split(/\s+/);if(r&&r.length<=4){var n,o=[],a=[],i=0;return r.forEach(function(e,t){if(n=kc.color(e),bt(n.value)&&o.push(n.value),n.reason){var r=n.reason(t.toString(),e,n.value),l=r.match(/^([A-Z]+):/);if(l){var s=dc.indexOf(l[1]);i<dc.indexOf(l[1])&&(i=s),r=r.replace(l[0],"").trim()}a.push(r)}}),{value:i<2?yt(e,o):null,reason:a.length>0?function(e,t,r){return dc[i]+": 属性`"+mt(e)+"` 的值 `"+t+"` 存在问题: \n  "+a.join("\n  ")}:null}}return{value:null,reason:function(e,t,r){return"ERROR: 属性`"+mt(e)+"` 的值 `"+t+"` 格式不正确"}}},border:function(e,t){e=(e||"").toString();var r=e.split(/\s+/);if(r&&r.length<=3){var n,o=[],a=[],i=0,l=[],s=-1;return r.forEach(function(e,r){if(bt(kc.length(e,t).value)?(l.push(0),n=Sc.borderWidth(e),n.value instanceof Array&&(o=o.concat(n.value))):bt(Sc.borderStyle(e).value)?(l.push(1),n=Sc.borderStyle(e),o.push({n:"borderStyle",v:e})):bt(kc.color(e).value)?(l.push(2),n=Sc.borderColor(e),n.value instanceof Array&&(o=o.concat(n.value))):(n={},i=2,a.push("属性`"+r+"` 的值 `"+e+"` 存在问题: \n  不满足width、style和color的检验标准")),n&&n.reason){var s=n.reason(r.toString(),e,n.value),c=s.match(/^([A-Z]+):/);if(c){var u=dc.indexOf(c[1]);i<dc.indexOf(c[1])&&(i=u),s=s.replace(c[0],"").trim()}a.push(s)}}),l.forEach(function(e){e>s?s=e:(i=2,a.push("必须按顺序设置属性width style color"))}),{value:i<2?o:null,reason:a.length>0?function(e,t,r){return dc[i]+": 属性`"+mt(e)+"` 的值 `"+t+"` 存在问题: \n  "+a.join("\n  ")}:null}}return{value:null,reason:function(e,t,r){return"ERROR: 属性`"+mt(e)+"` 的值 `"+t+"` 格式不正确"}}},display:function(e){e=(e||"").toString();var t=["flex","none"],r=t.indexOf(e);return r>0?{value:e}:"block"===e?{value:"flex",reason:function(e,r,n){return"ERROR: 属性`"+mt(e)+"` 的值 `"+r+"` 需修改为flex ` (有效枚举值为: `"+t.join("`|`")+"`)"}}:0===r?{value:e,reason:!1}:{value:null,reason:function(e,r,n){return"ERROR: 属性`"+mt(e)+"` 的值 `"+r+"` 无效 ` (有效枚举值为: `"+t.join("`|`")+"`)"}}}},Sc={width:kc.length,height:kc.length,padding:_t("arraylength",["paddingTop","paddingRight","paddingBottom","paddingLeft"]),paddingLeft:kc.length,paddingRight:kc.length,paddingTop:kc.length,paddingBottom:kc.length,margin:_t("arraylength",["marginTop","marginRight","marginBottom","marginLeft"]),marginLeft:kc.length,marginRight:kc.length,marginTop:kc.length,marginBottom:kc.length,border:kc.border,borderWidth:_t("arraylength",["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"]),borderLeftWidth:kc.length,borderTopWidth:kc.length,borderRightWidth:kc.length,borderBottomWidth:kc.length,borderColor:_t("arraycolor",["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"]),borderLeftColor:kc.color,borderTopColor:kc.color,borderRightColor:kc.color,borderBottomColor:kc.color,borderStyle:wt(["solid","dotted","dashed"]),borderRadius:kc.length,borderBottomLeftRadius:kc.length,borderBottomRightRadius:kc.length,borderTopLeftRadius:kc.length,borderTopRightRadius:kc.length,flex:kc.number,flexGrow:kc.number,flexShrink:kc.number,flexBasis:kc.length,flexDirection:wt(["row","column"]),flexWrap:wt(["nowrap","wrap","wrap-reverse"]),justifyContent:wt(["flex-start","flex-end","center","space-between"]),alignItems:wt(["stretch","flex-start","flex-end","center"]),alignContent:wt(["stretch","flex-start","flex-end","center","space-between","space-around"]),position:wt(["none","fixed"]),top:kc.length,bottom:kc.length,left:kc.length,right:kc.length,zIndex:kc.integer,opacity:kc.number,backgroundColor:kc.color,backgroundImage:kc.url,backgroundRepeat:wt(["no-repeat","repeat","repeat-x","repeat-y"]),backgroundPosition:kc.position,display:kc.display,visibility:wt(["visible","hidden"]),lines:kc.integer,color:kc.color,fontSize:kc.length,fontStyle:wt(["normal","italic"]),fontWeight:wt(["normal","bold"]),textDecoration:wt(["none","underline","line-through"]),textAlign:wt(["left","center","right"]),lineHeight:kc.length,textOverflow:wt(["clip","ellipsis"]),placeholderColor:kc.color,selectedColor:kc.color,textColor:kc.color,timeColor:kc.color,textHighlightColor:kc.color,strokeWidth:kc.length,progressColor:kc.color,resizeMode:wt(["cover","contain","stretch","center"]),columns:kc.number,columnSpan:kc.number},Oc={img:"image",p:"text",h1:"text",h2:"text",h3:"text",h4:"text",h5:"text",h6:"text",b:"span",strong:"span",i:"span",del:"span",article:"div",br:"span"},Lc={div:{},h1:{fontSize:"60px",fontWeight:"normal"},h2:{fontSize:"45px",fontWeight:"normal"},h3:{fontWeight:"normal",fontSize:"35px"},h4:{fontWeight:"normal",fontSize:"30px"},h5:{fontWeight:"normal",fontSize:"25px"},h6:{fontWeight:"normal",fontSize:"20px"},b:{fontWeight:"bold"},strong:{fontWeight:"bold"},i:{fontStyle:"italic"},a:{color:"#00BFFF"},del:{textDecoration:"line-through"}},Cc={br:{value:"\n"}},xc={compile:Ct},Nc=["public","protected","private"],Ic=1,Tc=function e(t,r,n,o,a,i){var l=this;n=n||{},this.__id__=Ic++,this._type=t,this._page=n._page||{},this._parent=n._realParent?n._realParent:n instanceof e?n:void 0,this._root=this._parent?this._parent._root:this,this._valid=!0,this._visible=!1,n._childrenVms&&n._childrenVms.push(this),!r&&this._page.app&&this._page.app.customComponentMap&&(r=ne(this._page.app,this._page,t)),r=r||{};var s=r.data||{};this._options=r,this._methods={},Object.keys(r).forEach(function(e){if(!q(e)&&!ys.isReservedEvent(e)){var t=r[e];"function"==typeof t&&(l._methods[e]=t)}}),this._css={style:r.style||{},selector:ir(r.style)},this._ids={},this._vmEvents={},this._childrenVms=[],this._props={},this._parentWatchers=[],ar(this,i),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 组件Vm("+this._type+")初始化完成"),this.$emit("xlc:onCreate"),this._created=!0,"function"==typeof s?this._data=s.call(this)||{}:(this._data={},x(this._data,s)),this._page&&this._page.app&&x(this._data,this._page.app.$data),nr(this,a),or(this),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 组件Vm("+this._type+")创建成功"),this.$emit("xlc:onInit"),this._inited=!0,this._page.doc&&(this._parentElement=o||this._page.doc.rootElement,Nt(this))},jc={$app:{},$page:{},$valid:{},$visible:{}};jc.$app.get=function(){return this._page.app},jc.$page.get=function(){var e=this._page;return Object.assign({setTitleBar:function(t){e&&e.doc&&(console.log("### App Framework ### 页面 "+e.id+" 调用 setTitleBar ----"),e.doc.listener.updatePageTitleBar(t))}},e&&e.intent)},jc.$valid.get=function(){return!!this._valid},jc.$visible.get=function(){return this.$valid&&!!this._visible},Tc.prototype.$parent=function(){return this._parent},Tc.prototype.$root=function(){return this._root},Tc.prototype.$emit=function(e,t){var r=this,n=this._vmEvents,o=n[e];if(o){var a=new ys(e,t),i=[];return o.forEach(function(e){i.push(e.call(r,a))}),i.length>0&&i[0]}return!1},Tc.prototype.$emitElement=function(e,t,r){if(void 0===r&&(r=-1),-1===r||void 0===r)r=void 0;else if("string"!=typeof r)return void console.error("### App Framework ### emitElement的参数id不合法");var n=this.$element(r);if(n){var o=new ys(e,t);return n.fireEvent(e,o)}console.error("### App Framework ### emitElement执行失败: 找不到id为 '"+r+"' 的组件")},Tc.prototype.$dispatch=function(e,t){var r=new ys(e,t);this.$emit(e,r),!r.hasStopped()&&this._parent&&this._parent.$dispatch&&this._parent.$dispatch(e,r)},Tc.prototype.$broadcast=function(e,t){var r=new ys(e,t);this.$emit(e,r),!r.hasStopped()&&this._childrenVms&&this._childrenVms.forEach(function(t){t.$broadcast(e,r)})},Tc.prototype.$on=function(e,t){if(e&&"function"==typeof t){var r=this._vmEvents,n=r[e]||[];n.push(t),r[e]=n}},Tc.prototype.$off=function(e,t){if(e){var r=this._vmEvents;if(!t)return void delete r[e];var n=r[e];n&&n.$remove(t)}},Tc.prototype.$forceUpdate=function(){var e=this._page;if(e&&e.doc){console.log("### App Framework ### 强制更新页面 ---- "+e.id);var t=he(e);this._ready&&t&&e.doc.listener.updateFinish()}},Tc.prototype.$set=function(e,t){Tc.parseExpression(e).set.call(this,this,t)},Tc.prototype.$delete=function(e){var t=this._data;Tc.delete(t,e)},Tc.prototype.$watch=function(e,t){var r=this;return"string"!=typeof e||"string"!=typeof t?void console.error("### App Framework ### $watch调用异常: 参数的数据类型非法, 必须是字符串"):this._methods[t]?new tc(r,function(){return Tc.getPath(r,e)},function(e,n){"object"!=typeof e&&e===n||r[t](e,n)}).value:void console.warn("### App Framework ### $watch调用异常:  句柄函数名 '"+t+"' 没有定义")},Tc.prototype._digest=function(){for(var e=this,t=this._watchers.length,r=0;r<t;r++)e._watchers[r].update(!0)},Object.defineProperties(Tc.prototype,jc),Tc.parseExpression=function(e){return{exp:e,get:function(t){return Tc.getPath(t,e)},set:function(t,r){Tc.setPath(t,e,r)}}},Tc.getPath=function(e,t){if(/[^\w.$]/.test(t))return void console.warn("### App Framework ### getPath调用:  观察对象 '"+t+"' 不合法");for(var r=t.split("."),n=r.pop(),o=r.length,a=0;a<o;a++){var i=r[a];if(W(i))return void console.warn("### App Framework ### getPath调用: 属性名 '"+i+"' 不能以 $ 或 _ 开头");if(!e[i])return void console.warn("### App Framework ### getPath调用: 属性名 '"+i+"' 在 '"+t+"' 中值为："+e[i]);e=e[i]}return e[n]},Tc.setPath=function(e,t,r){if(/[^\w.$]/.test(t))return void console.warn("### App Framework ### setPath调用:  观察对象 '"+t+"' 不合法");for(var n=t.split("."),o=n.pop(),a=n.length,i=0;i<a;i++){var l=n[i];if(W(l))return void console.warn("### App Framework ### setPath调用: 属性名 '"+l+"' 不能以 $ 或 _ 开头");if(!e[l])return void console.warn("### App Framework ### setPath调用: 属性名 '"+l+"' 在 '"+t+"' 中值为："+e[l]);e=e[l]}Tc.set(e,o,r)},Tc.set=function(e,t,r){if(null!=e){if(e instanceof Tc)return void Tc.set(e._data,t,r);if(Array.isArray(e))return e.splice(t,1,r);if(T(e,t))return void(e[t]=r);var n=e.__ob__;if(!n)return void(e[t]=r);if(n.convert(t,r),n.dep.notify(),n.vms)for(var o=n.vms.length;o--;){var a=n.vms[o];R(a,"_data",t),a._digest()}return r}},Tc.delete=function(e,t){if(null!=e&&T(e,t)){delete e[t];var r=e.__ob__;if(r&&(r.dep.notify(),r.vms))for(var n=r.vms.length;n--;){var o=r.vms[n];$(o,t),o._digest()}}};var Pc=function(e,t,r,n){console.log("### App Framework ### 启动App---- "+t);var o;if(!js(t))return new Error("bootstrap: 错误App名: "+t);o=V(t),r=B(r)?r:{},e.name=o,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 调用App("+o+")生命周期---- onCreate"),e.$emit("applc:onCreate")},Rc=function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 定义App---- "+t);var o,a;if(a=r.length>1?r[1]:r[0],"function"==typeof a&&(o=a,a=null),!js(t))return new Error("define: 无效应用名 "+t);if(o){var i=function(t){var r=V(t);return te(e,r)},l={exports:{}};o(i,l.exports,l),a=l.exports}global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 初始化App配置---- ",JSON.stringify(a)),e.$def=a},$c=function(e,t,r,n){console.log("### App Framework ### 启动页面---- "+t);var o;if(!Ps(t))return new Error("bootstrap: 错误页面名: "+t);o=V(t),r=B(r)?r:{},e.name=o,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 创建页面VM---- "+o),e.vm=new Tc(o,null,{_page:e},null,n,{})},Dc=function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 定义组件---- "+t);var o,a;if(a=r.length>1?r[1]:r[0],"function"==typeof a&&(o=a,a=null),!Ps(t))return new Error("define: 非法组件名 "+t+', 必须是"@app-component/XXXX"格式');if(o){var i=function(t){var r=V(t);return te(e,r)},l={exports:{}};o(i,l.exports,l,l.exports),a=l.exports,global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 初始化组件配置----",JSON.stringify(a))}var s=V(t);global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 注册自定义组件---- "+s),re(e.app,e,s,a)},Bc={},Wc={},Mc={1:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return fe.apply(void 0,[e].concat(t))},2:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return de.apply(void 0,[e].concat(t))}},Jc=Js.nativeComponentMap;global.registerMethods=mr;var zc={init:Er,createApplication:ur,destroyApplication:Lr,createPage:fr,recreatePage:wr,refreshPage:_r,destroyPage:Or,changeVisiblePage:Fr,backPressPage:Ar,menuPressPage:kr,orientationChangePage:Sr,processCallbacks:hr,processInvokeCallback:dr,registerComponents:vr,registerModules:gr,registerMethods:mr,getAppConfig:br,getPageRoot:yr,getPage:pr},Vc=function(e,t){this.id=e,this.batchThreshold=50,this.updates=[],this.actionLen=0,"function"==typeof t?Object.defineProperty(this,"handler",{configurable:!0,enumerable:!0,writable:!0,value:t}):console.error("### App Runtime ### handler必须是函数")};Vc.prototype.createFinish=function(e){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### createFinish---- ");var t=this.handler,r=t([Cr("createFinish")],e);return this.resetActionLen(),r},Vc.prototype.updateFinish=function(e){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### updateFinish---- ");var t=this.handler,r=t([Cr("updateFinish")],e);return this.resetActionLen(),r},Vc.prototype.refreshFinish=function(e){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### refreshFinish---- ");var t=this.handler,r=t([Cr("refreshFinish")],e);return this.resetActionLen(),r},Vc.prototype.createBody=function(e){var t=e.toJSON(),r=t.children;delete t.children;var n=[Cr("createBody",[t])];return r&&n.push.apply(n,r.map(function(e){return Cr("addElement",[t.ref,e,-1])})),this.addActions(n)},Vc.prototype.addNode=function(e,t,r){var n=this;t&&t.supportRender()||console.error("### App Framework ### addNode的parent("+t.type+")必须是可渲染节点"),r<0&&(r=-1);var o;if(e.nodeType===us.nodeType.Fragment){var a=this,i=r;e.layoutChildren.every(function(e){return o=e.nodeType===us.nodeType.Fragment?a.addNode(e,t,i):n.addElement(e,t.ref,i),i+=e.renderCount(),-1!==o})}else o=this.addElement(e,t.ref,r);return o},Vc.prototype.addElement=function(e,t,r){return r>=0||(r=-1),this.addActions(Cr("addElement",[t,e.toJSON(),r]))},Vc.prototype.removeNode=function(e){var t,r=this;return e.nodeType===us.nodeType.Fragment?e.layoutChildren.every(function(e){return-1!==(t=e.nodeType===us.nodeType.Fragment?r.removeNode(e):r.removeElement(e.ref))}):t=this.removeElement(e.ref),t},Vc.prototype.removeElement=function(e){if(Array.isArray(e)){var t=e.map(function(e){return Cr("removeElement",[e])});return this.addActions(t)}return this.addActions(Cr("removeElement",[e]))},Vc.prototype.moveNode=function(e,t,r){var n=this;t&&t.supportRender()||console.error("### App Framework ### moveNode的parent必须是可渲染节点"),r>=0||(r=-1);var o;if(e.nodeType===us.nodeType.Fragment){var a=this,i=r;e.layoutChildren.every(function(e){return o=e.nodeType===us.nodeType.Fragment?a.moveNode(e,t,i):n.moveElement(e.ref,t.ref,i),i+=e.renderCount(),-1!==o})}else o=this.moveElement(e.ref,t.ref,r);return o},Vc.prototype.moveElement=function(e,t,r){return this.addActions(Cr("moveElement",[e,t,r]))},Vc.prototype.setAttr=function(e,t,r){var n={attr:{}};return null==r?(console.warn("### App Framework ### 组件 "+e+" 的属性 "+t+" 被修改为 undefined/null, 自动修改为默认值或空值"),n.attr[t]=""):n.attr[t]=r,this.addActions(Cr("updateAttrs",[e,n]))},Vc.prototype.setStyle=function(e,t,r){var n={style:{}};return null==r?(console.warn("### App Framework ### 组件 "+e+" 的样式 "+t+" 被修改为 undefined/null, 自动修改为默认值或空值"),n.style[t]=""):n.style[t]=r,this.addActions(Cr("updateStyle",[e,n]))},Vc.prototype.setStyles=function(e,t){var r={style:t};return this.addActions(Cr("updateStyle",[e,r]))},Vc.prototype.addEvent=function(e,t){return this.addActions(Cr("addEvent",[e,t]))},Vc.prototype.removeEvent=function(e,t){return this.addActions(Cr("removeEvent",[e,t]))},Vc.prototype.updatePageTitleBar=function(e){return this.addActions(Cr("updateTitleBar",[e]))},Vc.prototype.handler=function(e,t){return t&&t()},Vc.prototype.addActions=function(e){var t=this.updates,r=this.handler;if(Array.isArray(e)||(e=[e]),global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### addActions---- ",JSON.stringify(e)),this.actionLen+=e.length,0===this.batchThreshold)t.push.apply(t,e);else{if(!(this.batchThreshold>1))return r(e);if(t.push.apply(t,e),t.length>=this.batchThreshold){var n=zc.getPage(this.id);n&&he(n)}}},Vc.prototype.hasActions=function(){return!!this.actionLen},Vc.prototype.resetActionLen=function(){this.actionLen=0};var qc=function e(t,r,n){t=t?t.toString():"",this.id=t,this.URL=r,p(t,this),this.nodeMap={},this.listener=new Vc(t,n||m(t,e.handler)),this.createRootElement()};qc.prototype.getRef=function(e){return this.nodeMap[e]},qc.prototype.createRootElement=function(){var e=this;if(!this.rootElement){var t=new gs("document");t.nodeType=us.nodeType.Document,t.docId=this.id,t.owner=this,t.role="document",t.depth=0,t.ref=us.documentId,this.nodeMap[t.ref]=t,this.rootElement=t,Object.defineProperty(t,"appendChild",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.appendBody(t)}}),Object.defineProperty(t,"insertBefore",{configurable:!0,enumerable:!0,writable:!0,value:function(t,r){e.appendBody(t,r)}})}return this.rootElement},qc.prototype.createBody=function(e,t){if(!this.body){var r=new gs(e,t);this.setBody(r)}return this.body},qc.prototype.createElement=function(e,t){return new gs(e,t)},qc.prototype.createFragment=function(){return new ms},qc.prototype.createComment=function(e){return new ps(e)},qc.prototype.fireEvent=function(e,t,r,n){if(e){if(r=r||{},r.type=t,r.target=e,r.timestamp=Date.now(),n){var o=n.attrs||{};for(var a in o)e.setAttr(a,o[a],!0);var i=n.style||{};for(var l in i)e.setStyle(l,i[l],!0)}return e.fireEvent(t,r)}},qc.prototype.destroy=function(){delete this.listener,delete this.nodeMap,d(this.id)},qc.prototype.appendBody=function(e,t){if(this.rootElement.layoutChildren.length>0||e.parentNode)return void(global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### Document添加多个Body节点----"));var r=this.rootElement.children,n=r.indexOf(t);if(n<0?r.push(e):r.splice(n,0,e),e.supportLayout()){if("body"===e.role)e.docId=this.id,e.owner=this,g(e,this.rootElement);else{e.children.forEach(function(t){t.parentNode=e});var o=e.ref;this.setBody(e),e.docId=this.id,e.owner=this,g(e,this.rootElement),delete this.nodeMap[o]}this.rootElement.layoutChildren.push(e),this.listener.createBody(e)}else e.parentNode=this.rootElement,this.nodeMap[e.ref]=e},qc.prototype.setBody=function(e){e.role="body",e.depth=1,delete this.nodeMap[e.ref],e.ref=us.rootId,this.nodeMap[e.ref]=e,this.body=e},qc.prototype.recreateActions=function(){var e=this.body;if(!e)return void console.error("### App Framework ### Document没有body节点, 无法重建");this.listener.createBody(e)},qc.handler=null;var Uc={},Gc=function(e,t){void 0===e&&(e="message"),void 0===t&&(t={}),this.type=e,this.data=t.data||null,this.timeStamp=Date.now()},Hc=function(e){Object.defineProperty(this,"name",{configurable:!1,enumerable:!0,writable:!1,value:String(e)}),this._closed=!1,this.onmessage=null,Uc[this.name]||(Uc[this.name]=[]),Uc[this.name].push(this)};Hc.prototype.postMessage=function(e){var t=this;if(this._closed)throw new Error('BroadcastChannel "'+this.name+'" is closed.');var r=Uc[this.name];if(r&&r.length)for(var n=0;n<r.length;++n){var o=r[n];o._closed||o===t||"function"==typeof o.onmessage&&o.onmessage(new Gc("message",{data:e}))}},Hc.prototype.close=function(){if(!this._closed&&(this._closed=!0,Uc[this.name])){var e=Uc[this.name].indexOf(this);e>-1?Uc[this.name].splice(e,1):delete Uc[this.name]}};var Zc=[],Kc=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return global.callNative.apply(global,e)};qc.handler=Kc;var Xc={DomDocument:qc,DomElement:gs,DomComment:ps,DomFragment:ms,DomListener:Vc,sendActions:Kc,BroadcastChannel:Hc},Yc={},Qc={},eu={},tu=["registerComponents","registerModules","registerMethods"],ru=["createApplication","getAppConfig","destroyApplication"],nu=["createPage","destroyPage","refreshPage","recreatePage","changeVisiblePage","backPressPage","menuPressPage","orientationChangePage",["processCallbacks","execJSBatch"],["processInvokeCallback","execInvokeCallback"],"getPageRoot"],ou={config:Xc,init:Tr,prepare:jr,setNativeConsole:ls.setNativeConsole,resetNativeConsole:ls.resetNativeConsole,setNativeTimer:ls.setNativeTimer,resetNativeTimer:ls.resetNativeTimer,setNativeRouter:ls.setNativeRouter,resetNativeRouter:ls.resetNativeRouter},au=Object.assign||function(e){for(var t=arguments,r=1;r<arguments.length;r++){var n=t[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},iu={$child:Dr,$vm:Br,$element:Rr,$rootElement:$r,$config:Mr,$render:Wr,$createElement:zr,$extend:au,$stringify:Jr};zc.registerMethods(iu),Object.freeze(Tc);var lu=ou.config;lu.frameworks={XApp:zc},ou.prepare(),global.frameworkVersion=Vr.framework,global.packagerVersion=Vr.packager,global.BroadcastChannel=lu.BroadcastChannel;var su=ou.init(lu);for(var cu in su)!function(e){global.Env&&"trace"===global.Env.logLevel&&console.trace("### App Framework ### 注册全局函数----",e),global[e]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=su[e].apply(su,t);return n instanceof Error&&console.error(n.toString()),n}}(cu)});
//# sourceMappingURL=web.min.js.map
